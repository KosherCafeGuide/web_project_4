!function(){"use strict";var e=class{constructor(e,t){this.settings=e,this.formElement=t}_hideInputError(e){const t=this.formElement.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this.settings.errorClass),e.classList.remove(this.settings.inputErrorClass)}_showInputError(e){const t=this.formElement.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this.settings.errorClass),e.classList.add(this.settings.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this.inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this.button.classList.add(this.settings.inactiveButtonClass),this.button.disabled=!0):(this.button.classList.remove(this.settings.inactiveButtonClass),this.button.disabled=!1)}_setEventListners(){this.inputList=[...this.formElement.querySelectorAll(this.settings.inputSelector)],this.button=this.formElement.querySelector(this.settings.submitButtonSelector),this.inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this.formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListners()}resetValidation(){this.inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};const t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};var s=class{constructor(e){this.popupElement=document.querySelector(e),this._handleEscUp=this._handleEscUp.bind(this),this.close=this.close.bind(this),this.open=this.open.bind(this)}_handleEscUp(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this.popupElement.querySelector(".cancel").addEventListener("click",this.close),this.popupElement.addEventListener("mousedown",(e=>{e.target===this.popupElement&&this.close()}))}_handleOverlayClick(e){e.target===this.popupElement&&this.close()}open(){this.popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscUp)}close(){this.popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscUp)}},i=class extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;var i,n;super(t),n=()=>{this._form.reset(),super.close()},(i="close")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this._handleFormSubmit=s,this._form=this.popupElement.querySelector(".popup__form"),this._submitBtn=this._form.querySelector(".popup__button")}_getInputValues(){const e=[...this._form.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}changeSubmitBtnText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"saving";this._submitBtn.textContent=e}_formSubmit(){this._handleFormSubmit(this._getInputValues())}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>this._formSubmit(e)))}prefillForm(e){[...this._form.querySelectorAll(".popup__input")].forEach((t=>{t.value=e[t.name]}))}};const n=new class{constructor(e){let{baseURL:t,headers:s}=e;this.baseURL=t,this.headers=s}_customFetch(e){return fetch(e,{method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch((e=>{console.log(e)}))}getInitialCards(){return this._customFetch("".concat(this.baseURL,"/cards"))}getUserInfo(){return this._customFetch("".concat(this.baseURL,"/users/me"))}editProfile(e){let{userName:t,about:s}=e;return fetch("".concat(this.baseURL,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:s})})}addCard(e){let{name:t,link:s}=e;return fetch("".concat(this.baseURL,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:s})}).then((e=>e.json()))}deleteCard(e){return this._customFetch("".concat(this.baseURL,"/cards/").concat(e),"DELETE")}getLikesCount(e){return fetch("".concat(this.baseURL,"/cards").concat(e),{headers:this.headers}).then((e=>e.json())).then((e=>e.likes.length))}isMyCard(e){return fetch("".concat(this.baseURL,"/cards/").concat(e),{headers:this.headers}).then((e=>e.json())).then((e=>e.owner._id===this.authorisation))}likeCard(e){return this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"PUT")}unlikeCard(e){return this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"DELETE")}updateAvatar(e){let{link:t}=e;return fetch("".concat(this.baseURL,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch((e=>{console.log(e)}))}}({baseURL:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"077e02f5-469c-4925-a110-e7daac9f6ead","Content-Type":"application/json"}});const r=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this.nameElement=document.querySelector(t),this.jobElement=document.querySelector(s),this.avatarElement=document.querySelector(i)}getUserInfo(){return{name:this.nameElement.textContent,job:this.jobElement.textContent}}setUserInfo(e){let{userName:t,job:s,userID:i}=e;this.nameElement.textContent=t,this.jobElement.textContent=s,this.userID=i}getUserID(){return this.userID}setAvatar(e){this.avatarElement.style.backgroundImage="url(".concat(e,")")}}({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"}),o=e=>{let t=e.owner._id===l;const s=new class{constructor(e,t){this._title=e.data.name,this._imageUrl=e.data.link,this._cardID=e.data._id,this._ownerID=e.data.owner._id,this._likes=e.data.likes,this._handleCardClick=e.handleCardClick,this._confirmDelete=e.confirmDelete,this._toggleMyLikeTo=e.toggleMyLikeTo,this._templateSelector=t,this._doILike=this._doILike.bind(this)}_getTemplate(){this._cardElement=document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_addDataToCard(){this.title=this._cardElement.querySelector(".element__image-title"),this.image=this._cardElement.querySelector(".element__image"),this.likesCount=this._cardElement.querySelector(".element__likes-count"),void 0===this._likes&&(this._likes=[]),this.likesCount.textContent=this._likes.length,this.title.textContent=this._title,this.image.src=this._imageUrl,this.image.alt=this._title}deleteCard(){this._cardElement.remove(),this._cardElement=null}_doILike(e){return e._id===this._myID}_addEventListeners(e){const t=this._cardElement.querySelector(".element__delete-btn");e?(t.classList.remove("hide"),t.addEventListener("click",(()=>{this._confirmDelete(this)}))):t.classList.add("hide"),this.likeBtn=this._cardElement.querySelector(".element__like-toggle"),this.isLikedByMe=this._likes.find(this._doILike),this._setLikeIcon(),this.likeBtn.addEventListener("click",(()=>{this.isLikedByMe=!this.isLikedByMe,this.isLikedByMe?this.likesCount.textContent=Number(this.likesCount.textContent)+1:this.likesCount.textContent=Number(this.likesCount.textContent)-1,this._toggleMyLikeTo(this._cardID,this.isLikedByMe),this._setLikeIcon()})),this.image.addEventListener("click",(()=>{this._handleCardClick({link:this._imageUrl,name:this._title})}))}_setLikeIcon(){this.isLikedByMe?this.likeBtn.classList.add("element__like-toggle-active"):this.likeBtn.classList.remove("element__like-toggle-active")}generateCard(e,t){return this._myID=t,this._getTemplate(),this._addDataToCard(),this._addEventListeners(e),this._cardElement}getID(){return this._cardID}}({data:e,handleCardClick:()=>{h(e)},confirmDelete:e=>{m(e)},toggleMyLikeTo:(e,t)=>{t?n.likeCard(e):n.unlikeCard(e)}},"#element");a.addItem(s.generateCard(t,l))},a=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:o},".elements");let l="0";Promise.all([n.getInitialCards(),n.getUserInfo()]).then((e=>{let[t,s]=e;l=s._id,a.renderItems(t),r.setUserInfo({userName:s.name,job:s.about,userID:s._id}),r.setAvatar(s.avatar)}));const c=new class extends s{constructor(){var e,t;super(...arguments),t=e=>{let{link:t,name:s}=e;this.popupElement.querySelector(".popup__image-title").textContent=s;const i=this.popupElement.querySelector(".popup__image");i.src=t,i.alt=s,super.open()},(e="open")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this.open=t}}(".popup-image"),h=e=>{c.open(e)},u=new i({popupSelector:".popup-profile-form",handleFormSubmit:e=>{u.changeSubmitBtnText("Updating profile information"),n.editProfile({userName:e.name,about:e.job}).then((t=>{t.ok?(r.setUserInfo({userName:e.name,job:e.job}),u.changeSubmitBtnText("Profile Information updated successfully")):(console.log("error updating User Profile"),console.log(t.statusText),u.changeSubmitBtnText(t.statusText))})).finally((e=>{u.changeSubmitBtnText("Save"),u.close()}))}}),d=new class extends s{constructor(e){let{popupSelector:t,handleSubmit:s}=e;super(t),this._handleSubmit=s,this._confirmation=this.popupElement.querySelector(".popup__confirmation"),this._submitBtn=this._confirmation.querySelector(".popup__button")}_confirmSubmit(e){e.preventDefault(),this._handleSubmit(this.card),this.close()}open(e){this.card=e,super.open()}setEventListeners(){super.setEventListeners(),this._confirmation.addEventListener("submit",(e=>this._confirmSubmit(e)))}changeSubmitBtnText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"saving";this._submitBtn.textContent=e}}({popupSelector:".popup-delete-confirmation",handleSubmit:e=>{d.changeSubmitBtnText("Deleting..."),n.deleteCard(e.getID()).then((t=>{void 0!==t.message?(d.changeSubmitBtnText("Card Deleted"),e.deleteCard()):reject("error while deleting image from server")})).catch((e=>{console.log(e)})).finally((e=>{d.changeSubmitBtnText("Yes"),d.close()}))}}),m=e=>{d.open(e)},p=new i({popupSelector:".popup-place-form",handleFormSubmit:e=>{p.changeSubmitBtnText("Adding new photo"),n.addCard(e).then((t=>{e.owner={_id:r.getUserID()},e._id=t._id,p.changeSubmitBtnText("New photo successfully added"),e.owner._id=l,o(e)})).catch({}).finally((e=>{p.changeSubmitBtnText("Save"),p.close()}))}}),_=new i({popupSelector:".popup-avatar-form",handleFormSubmit:e=>{_.changeSubmitBtnText("Updating avatar image"),n.updateAvatar(e).then((t=>{t.avatar===e.link?(_.changeSubmitBtnText("Avatar successfully updated"),r.setAvatar(e.link)):console.log("Error changing Avatar image")})).catch({}).finally((e=>{_.changeSubmitBtnText("Save"),_.close()}))}}),g=new e(t,u.popupElement),b=new e(t,p.popupElement),v=new e(t,_.popupElement);c.setEventListeners(),u.setEventListeners(),p.setEventListeners(),d.setEventListeners(),_.setEventListeners(),g.enableValidation(),b.enableValidation(),v.enableValidation();const E=document.querySelector(".profile__edit-btn"),f=document.querySelector(".profile__add-btn"),S=document.querySelector(".profile__edit-avatar-btn");E.addEventListener("click",(()=>{u.open(),u.prefillForm(r.getUserInfo()),g.resetValidation()})),f.addEventListener("click",(()=>{p.open(),b.resetValidation()})),S.addEventListener("click",(()=>{_.open(),v.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxJQUNMMEgsRUFBa0J0SSxvQkFBb0IsUUFDdENzSSxFQUFrQjFKLGNBUzVCMkosRUFBdUIsSUFBSUMsRUFBY25LLEVBQW1CcUosRUFBY2xKLGNBQzFFaUssRUFBcUIsSUFBSUQsRUFBY25LLEVBQW1CZ0ssRUFBYTdKLGNBQ3ZFa0ssRUFBNEIsSUFBSUYsRUFBY25LLEVBQW1CaUssRUFBa0I5SixjQUl6RmdKLEVBQVd4SSxvQkFDWDBJLEVBQWMxSSxvQkFDZHFKLEVBQWFySixvQkFDYjZJLEVBQXdCN0ksb0JBQ3hCc0osRUFBa0J0SixvQkFTbEJ1SixFQUFxQnRLLG1CQUNyQndLLEVBQW1CeEssbUJBQ25CeUssRUFBMEJ6SyxtQkFLMUIsTUFBTTBLLEVBQWtCbEssU0FBU25DLGNBQWMsc0JBQ3pDc00sRUFBZ0JuSyxTQUFTbkMsY0FBYyxxQkFDdkN1TSxFQUFpQnBLLFNBQVNuQyxjQUFjLDZCQU85Q3FNLEVBQWdCM0ssaUJBQWlCLFNBTk0sS0FDbkMwSixFQUFjN0ksT0FDZDZJLEVBQWN2SCxZQUFZNEMsRUFBU3hCLGVBQ25DZ0gsRUFBcUJuSyxxQkFTekJ3SyxFQUFjNUssaUJBQWlCLFNBSkosS0FDdkJxSyxFQUFheEosT0FDYjRKLEVBQW1CcksscUJBT3ZCeUssRUFBZTdLLGlCQUFpQixTQUpOLEtBQ3RCc0ssRUFBa0J6SixPQUNsQjZKLEVBQTBCdEsscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9DYXJkIGNsYXNzIHdpdGggRXhwb3J0XHJcbmNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gZGF0YS5kYXRhLm5hbWU7IC8vbm90IHN1cmUgd2h5IEkgbmVlZCB0aGUgZXh0cmEgXCJkYXRhLlwiIGhlcmUhXHJcbiAgICAgICAgdGhpcy5faW1hZ2VVcmwgPSBkYXRhLmRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9jYXJkSUQgPSBkYXRhLmRhdGEuX2lkO1xyXG4gICAgICAgIHRoaXMuX293bmVySUQgPSBkYXRhLmRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5kYXRhLmxpa2VzO1xyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBkYXRhLmhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlID0gZGF0YS5jb25maXJtRGVsZXRlOyAvL3JldHVybnMgdHJ1ZSBpZiBzaG91bGQgZGVsZXRlIFxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZU15TGlrZVRvID0gZGF0YS50b2dnbGVNeUxpa2VUbzsgLy90b2dnbGUgbGlrZSBzdGF0dXMgb24gc2VydmVyXHJcblxyXG5cclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjsgLy8gXCIjY2FyZC10ZW1wbGF0ZVwiXHJcblxyXG4gICAgICAgIHRoaXMuX2RvSUxpa2UgPSB0aGlzLl9kb0lMaWtlLmJpbmQodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgfVxyXG4gICAgX2FkZERhdGFUb0NhcmQoKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2UtdGl0bGVcIik7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5saWtlc0NvdW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlcy1jb3VudFwiKTtcclxuICAgICAgICBpZiAodGhpcy5fbGlrZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpa2VzQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy50aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2VVcmw7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIH1cclxuICAgIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7IC8vdGhpcy5fY2FyZEVsZW1lbnQ9bnVsbDsgZG9lcyBub3Qgd29ya1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIF9kb0lMaWtlKGlkT2ZMaWtlcikge1xyXG4gICAgICAgIHJldHVybiBpZE9mTGlrZXIuX2lkID09PSB0aGlzLl9teUlEO1xyXG4gICAgfVxyXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJzKGNhbkRlbGV0ZSkge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ0blwiKVxyXG4gICAgICAgIGlmIChjYW5EZWxldGUpIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1EZWxldGUodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlrZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS10b2dnbGVcIik7XHJcbiAgICAgICAgdGhpcy5pc0xpa2VkQnlNZSA9IHRoaXMuX2xpa2VzLmZpbmQodGhpcy5fZG9JTGlrZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0TGlrZUljb24oKTtcclxuICAgICAgICB0aGlzLmxpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0xpa2VkQnlNZSA9ICF0aGlzLmlzTGlrZWRCeU1lO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0xpa2VkQnlNZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saWtlc0NvdW50LnRleHRDb250ZW50ID0gTnVtYmVyKHRoaXMubGlrZXNDb3VudC50ZXh0Q29udGVudCkgKyAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saWtlc0NvdW50LnRleHRDb250ZW50ID0gTnVtYmVyKHRoaXMubGlrZXNDb3VudC50ZXh0Q29udGVudCkgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZU15TGlrZVRvKHRoaXMuX2NhcmRJRCwgdGhpcy5pc0xpa2VkQnlNZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldExpa2VJY29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7XHJcbiAgICAgICAgICAgICAgICBsaW5rOiB0aGlzLl9pbWFnZVVybCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX3RpdGxlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX3NldExpa2VJY29uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWRCeU1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fbGlrZS10b2dnbGUtYWN0aXZlXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9fbGlrZS10b2dnbGUtYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdlbmVyYXRlQ2FyZChjYW5EZWxldGUsIG15SUQpIHtcclxuICAgICAgICB0aGlzLl9teUlEID0gbXlJRDtcclxuICAgICAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2FkZERhdGFUb0NhcmQoKTtcclxuICAgICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycyhjYW5EZWxldGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBnZXRJRCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZElEO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsIi8vY2xhc3MgRm9ybVZhbGlkYXRvciB3aXRoIEV4cG9ydFxyXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5nczsgLy9zZWxlY3RvcnMgYW5kIGZvcm0gY2xhc3Nlc1xyXG4gICAgICAgIHRoaXMuZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDsgLy9mb3JtIGVsZW1lbnQgdG8gYmUgdmFsaWRhdGVkXHJcbiAgICB9XHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGlucHV0LmlkICsgXCItZXJyb3JcIik7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICAgICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4geyByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCB9KVxyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpXHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcylcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0RXZlbnRMaXN0bmVycygpIHtcclxuICAgICAgICB0aGlzLmlucHV0TGlzdCA9IFsuLi50aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKV07XHJcbiAgICAgICAgdGhpcy5idXR0b24gPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0bmVycygpO1xyXG5cclxuICAgIH1cclxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCkgLy9jbGVhcmluZyBlcnJvcnMgZXZlbiBpZiB1c2VyIGFjY2lkZW50bHkgbGVhdmVzIHRoZSBmb3JtIHdpdGggZXJyb3JzIG9uIGl0ISAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vIGNvbnRyb2xsaW5nIHRoZSBzdWJtaXQgYnV0dG9uIFxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiZXhwb3J0IGNvbnN0IGRlZmF1bHRGb3JtQ29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlnID0ge1xyXG4gICAgaW1hZ2VNb2RhbFdpbmRvdzogXCIucG9wdXAtaW1hZ2VcIixcclxuICAgIGVkaXRGb3JtTW9kYWxXaW5kb3c6IFwiLnBvcHVwLXByb2ZpbGUtZm9ybVwiLFxyXG4gICAgY2FyZEZvcm1Nb2RhbFdpbmRvdzogXCIucG9wdXAtcGxhY2UtZm9ybVwiLFxyXG4gICAgZGVsZXRlQ29uZmlybWF0aW9uV2luZG93OiBcIi5wb3B1cC1kZWxldGUtY29uZmlybWF0aW9uXCIsXHJcbiAgICBjaGFuZ2VBdmF0YXJNb2RhbFdpbmRvdzogXCIucG9wdXAtYXZhdGFyLWZvcm1cIlxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVDb25maWcgPSB7XHJcbiAgICBwcm9maWxlVGl0bGU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICAgIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fam9iXCIsXHJcbiAgICBwcm9maWxlQXZhdGFySW1hZ2U6IFwiLnByb2ZpbGVfX2F2YXRhclwiXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZHNDb25maWcgPSB7XHJcbiAgICBjYXJkU2VsZWN0b3I6IFwiI2VsZW1lbnRcIiwgLy9DYXJkLiB0ZW1wbGF0ZVNlbGVjdG9yICBcclxuICAgIHBsYWNlc3dyYXA6IFwiLmVsZW1lbnRzXCIsIC8vU2VjdGlvbi5jb250YWluZXJTZWxlY3RvclxyXG59O1xyXG5leHBvcnQgY29uc3Qgc3VibWl0QnV0dG9uQ29uZmlnID0ge1xyXG4gICAgcHJvZmlsZTogXCIuZWRpdC1wcm9maWxlLWZvcm1fX3NhdmVcIixcclxuICAgIGF2YXRhcjogXCIudXBkYXRlLWF2YXRhci1mb3JtX19zYXZlXCIsXHJcbiAgICBjYXJkOiBcIi5hZGQtcGxhY2UtZm9ybV9fc2F2ZVwiXHJcbn0iLCJjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY1VwID0gdGhpcy5faGFuZGxlRXNjVXAuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NVcChldnQpIHtcclxuICAgICAgICAvL3ByZXZlbnQgZGVmYXVsdCBhbmQgaWYgYnV0dG9uIHdhcyBFc2MgY2FsbCBjbG9zZSBtZXRob2RcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvL2NyZWF0ZSBhbiBldmVudCBsaXN0ZW5lciBmb3IgY2xpY2sgb24gY2xvc2UgYnV0dG9uIG9yIHNlbWl0cmFuc3BhcmVudCBiYWNrZ3JvdW5kXHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbmNlbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7IC8vY2xvc2UgYnV0dG9uXHJcbiAgICAgICAgLy9zdWdnZXN0aW9uIG9mIG1vdXNlZG93biB1c2VkLiBldmVudExpc3RlbmVycyB1c2luZyBhcnJvdyBmdW5jdGlvbnMgY2FuJ3QgYmUgcmVtb3ZlZCxcclxuICAgICAgICAvLyBhbmQgaWYgSSBkb24ndCB1c2UgYW4gYXJyb3cgZnVuY3Rpb24gSSBkb24ndCBoYXZlIGFjY2VzcyB0byBib3RoIGV2dC50YXJnZXQgYW5kIHRoaXMucG9wdXBFbGVtZW50XHJcbiAgICAgICAgLy8gc28gaWYgSSBjYW4ndCByZW1vdmUgaXQgaW4gY2xvc2UsIEknbSBub3QgZ29pbmcgdG8gY3JlYXRlIGEgbmV3IG9uIHdpdGggZWFjaCBvcGVuITkwLS84NDcyNDI1NDUxMTMyICAgICAgICBcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLnBvcHVwRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOyAvL3BvcHVwIHNlbWl0cmFuc3BhcmVudCBiYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9oYW5kbGVPdmVybGF5Q2xpY2soZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMucG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsgLy9wb3B1cCBzZW1pdHJhbnNwYXJlbnQgYmFja2dyb3VuZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgLy9hZGQgYSBuZXcgY2xhc3MgYW5kIGNyZWF0ZXMgYW4gZXZlbnRsaXN0ZW5lciBmb3IgRXNjIGtleXVwXHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIC8vcmVtb3ZlcyB0aGUgY2xhc3Mgd2UgYWRkZWQgYW5kIHRoZSBldmVudGxpc3RlbmVyIGZvciB0aGUgRXNjIGtleXVwXHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vdGhpcy5wb3B1cEVsZW1lbnRcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xyXG5cclxuICAgIH1cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JyldO1xyXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VTdWJtaXRCdG5UZXh0KG1zZyA9IFwic2F2aW5nXCIpIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBtc2c7XHJcbiAgICB9XHJcbiAgICBfZm9ybVN1Ym1pdCgpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB0aGlzLl9mb3JtU3VibWl0KGV2dCkpO1xyXG4gICAgfVxyXG4gICAgY2xvc2UgPSAoKSA9PiB7IC8vYXJyb3cgZnVuY3Rpb24gbWV0aG9kLCByZXRhaW5zIGNvbnRleHQgd2l0aG91dCBuZWVkIGZvciAuYmluZCh0aGlzKVxyXG5cclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVmaWxsRm9ybShpbnB1dFZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKV07XHJcbiAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiY2xhc3MgQVBJIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVSTCwgaGVhZGVycyB9KSB7XHJcbiAgICAgICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcclxuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG4gICAgX2N1c3RvbUZldGNoKHVybCwgbWV0aG9kID0gXCJHRVRcIikgeyAvL3VzZWQgaW50ZXJuYWxseVxyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7IC8vaW5kZXguanMgbGluZSA2NlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzYCk7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHsgLy9pbmRleC5qcyBMaW5lIDY2IGFuZCAxODZcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS91c2Vycy9tZWApO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXRQcm9maWxlKHsgdXNlck5hbWUsIGFib3V0IH0pIHsgLy9pbmRleC5qcyBMaW5lIDkxXHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7IC8vaW5kZXguanMgTGluZSAxMzZcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSUQpIHsgLy9pbmRleC5qcyBMaW5lIDEwOVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzLyR7Y2FyZElEfWAsIFwiREVMRVRFXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qTm90IHVzZWQgeWV0Ki9cclxuICAgIGdldExpa2VzQ291bnQoY2FyZElEKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzJHtjYXJkSUR9YCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qTm90IHVzZWQgeWV0Ki9cclxuICAgIGlzTXlDYXJkKGNhcmRJRCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5vd25lci5faWQgPT09IHRoaXMuYXV0aG9yaXNhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxpa2VDYXJkKGNhcmRJRCkgeyAvL2luZGV4LmpzIExpbmUgNDhcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCBcIlBVVFwiKTtcclxuICAgIH1cclxuICAgIHVubGlrZUNhcmQoY2FyZElEKSB7IC8vaW5kZXguanMgTGluZSA1MFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzL2xpa2VzLyR7Y2FyZElEfWAsIFwiREVMRVRFXCIpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlQXZhdGFyKHsgbGluayB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVSTH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBsaW5rXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXNUZXh0KSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBUEkoe1xyXG4gICAgYmFzZVVSTDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwNzdlMDJmNS00NjljLTQ5MjUtYTExMC1lN2RhYWM5ZjZlYWRcIixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfVxyXG59KTsiLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG4vKmltcG9ydCBhdmF0YXIgZnJvbSBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XHJcbmNvbnN0IGF2YXRhclByb2ZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGVfX2F2YXRhclwiKTtcclxuYXZhdGFyUHJvZmlsZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YXZhdGFyfSlgOyovXHJcbi8vaW1wb3J0IGFuZCBpbXBsZW1lbnQgY2xhc3NlcyBmcm9tIENhcmQgYW5kIEZvcm1WYWxpZGF0b3IgXHJcbi8vYW5kIGltcGxlbWVudCBmdW5jdGlvbnMgaW4gdXRpbHMsIHVzaW5nIHByZXNldCBjYXJkc1xyXG5cclxuLy8tLVxyXG4vL2ltcG9ydCBzdGF0ZW1lbnRzXHJcbi8vLS1cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRGb3JtQ29uZmlnLCBwb3B1cENvbmZpZywgcHJvZmlsZUNvbmZpZywgY2FyZHNDb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvblwiO1xyXG5cclxuXHJcbi8vLS1cclxuLy9Qcm9maWxlIFNldHVwXHJcbi8vLS1cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIG5hbWVTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlVGl0bGUsXHJcbiAgICBqb2JTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgICBhdmF0YXJTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlQXZhdGFySW1hZ2VcclxufSk7XHJcblxyXG4vLy0tXHJcbi8vQ2FyZHMgU2V0dXBcclxuLy8tLVxyXG5cclxuXHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gICAgbGV0IGNhbkRlbGV0ZSA9ICgoZGF0YS5vd25lci5faWQgPT09IG15SUQpID8gdHJ1ZSA6IGZhbHNlKTtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgb3BlbkltYWdlUG9wdXAoZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb25maXJtRGVsZXRlOiAoY2FyZFRvRGVsZXRlKSA9PiB7XHJcbiAgICAgICAgICAgIG9wZW5EZWxldGVDb25maXJtYXRpb25Qb3B1cChjYXJkVG9EZWxldGUpXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2dnbGVNeUxpa2VUbzogKGNhcmRJRCwgaXNMaWtlZEJ5TWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzTGlrZWRCeU1lKSB7XHJcbiAgICAgICAgICAgICAgICBhcGkubGlrZUNhcmQoY2FyZElEKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFwaS51bmxpa2VDYXJkKGNhcmRJRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSwgY2FyZHNDb25maWcuY2FyZFNlbGVjdG9yKTtcclxuICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKGNhbkRlbGV0ZSwgbXlJRCkpO1xyXG59XHJcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG59LCBjYXJkc0NvbmZpZy5wbGFjZXN3cmFwKTtcclxuXHJcbmxldCBteUlEID0gXCIwXCI7XHJcbi8vbGV0IC8vaGFyZFJlZnJlc2ggPSBmYWxzZTtcclxuXHJcbi8vZnVuY3Rpb24gcmVmcmVzaFNjcmVlbigpIHtcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG4gICAgLnRoZW4oKFtjYXJkRGF0YSwgdXNlckRhdGFdKSA9PiB7XHJcbiAgICAgICAgLyppZiAoIC8vaGFyZFJlZnJlc2ggPT09IHRydWUpIHtcclxuICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgICAgIC8vaGFyZFJlZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICB9Ki9cclxuICAgICAgICBteUlEID0gdXNlckRhdGEuX2lkO1xyXG4gICAgICAgIGNhcmRzTGlzdC5yZW5kZXJJdGVtcyhjYXJkRGF0YSk7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyB1c2VyTmFtZTogdXNlckRhdGEubmFtZSwgam9iOiB1c2VyRGF0YS5hYm91dCwgdXNlcklEOiB1c2VyRGF0YS5faWQgfSk7XHJcbiAgICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICB9KVxyXG5cclxuLy99XHJcbi8vcmVmcmVzaFNjcmVlbigpO1xyXG4vLy0tXHJcbi8vSW1hZ2UgUG9wdXAgU2V0dXBcclxuLy8tLVxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwQ29uZmlnLmltYWdlTW9kYWxXaW5kb3cpO1xyXG5jb25zdCBvcGVuSW1hZ2VQb3B1cCA9IChkYXRhKSA9PiB7IGltYWdlUG9wdXAub3BlbihkYXRhKTsgfTtcclxuLy8tLVxyXG4vL1N1Ym1pdEJ1dHRvbiBUZXh0Q29udGVudFxyXG4vLy0tXHJcbi8vY29uc3QgdXNlckluZm9TdWJtaXRUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25Db25maWcucHJvZmlsZSkuXHJcbi8vLS1cclxuLy9Vc2VyIEluZm8gUG9wdXAgU2V0dXBcclxuLy8tLVxyXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogcG9wdXBDb25maWcuZWRpdEZvcm1Nb2RhbFdpbmRvdyxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm9Qb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiVXBkYXRpbmcgcHJvZmlsZSBpbmZvcm1hdGlvblwiKTtcclxuICAgICAgICBhcGkuZWRpdFByb2ZpbGUoeyB1c2VyTmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5qb2IgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJOYW1lOiBkYXRhLm5hbWUsIGpvYjogZGF0YS5qb2IgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9oYXJkUmVmcmVzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckluZm9Qb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiUHJvZmlsZSBJbmZvcm1hdGlvbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3JlZnJlc2hTY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvciB1cGRhdGluZyBVc2VyIFByb2ZpbGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJbmZvUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChyZXMuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mb1BvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJTYXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm9Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG59KTtcclxuY29uc3QgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlnLmRlbGV0ZUNvbmZpcm1hdGlvbldpbmRvdyxcclxuICAgIGhhbmRsZVN1Ym1pdDogKGNhcmQpID0+IHtcclxuICAgICAgICBkZWxldGVDb25maXJtYXRpb25Qb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiRGVsZXRpbmcuLi5cIik7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5nZXRJRCgpKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb25Qb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiQ2FyZCBEZWxldGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGFyZFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVmcmVzaFNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJlcnJvciB3aGlsZSBkZWxldGluZyBpbWFnZSBmcm9tIHNlcnZlclwiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseShyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChcIlllc1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb25Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufSk7XHJcbmNvbnN0IG9wZW5EZWxldGVDb25maXJtYXRpb25Qb3B1cCA9IChkYXRhKSA9PiB7IGRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwLm9wZW4oZGF0YSk7IH07XHJcblxyXG4vLy0tXHJcbi8vQWRkIENhcmQgUG9wdXAgU2V0dXBcclxuLy8tLVxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpZy5jYXJkRm9ybU1vZGFsV2luZG93LFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgICAgICBuZXdDYXJkUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChcIkFkZGluZyBuZXcgcGhvdG9cIik7XHJcbiAgICAgICAgYXBpLmFkZENhcmQoZGF0YSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGRhdGEub3duZXIgPSB7IF9pZDogdXNlckluZm8uZ2V0VXNlcklEKCkgfTtcclxuICAgICAgICAgICAgICAgIGRhdGEuX2lkID0gcmVzLl9pZDtcclxuICAgICAgICAgICAgICAgIG5ld0NhcmRQb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiTmV3IHBob3RvIHN1Y2Nlc3NmdWxseSBhZGRlZFwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGEub3duZXIuX2lkID0gbXlJRDtcclxuICAgICAgICAgICAgICAgIHJlbmRlckNhcmQoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCh7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseShyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3Q2FyZFBvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJTYXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGNoYW5nZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogcG9wdXBDb25maWcuY2hhbmdlQXZhdGFyTW9kYWxXaW5kb3csXHJcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNoYW5nZUF2YXRhclBvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJVcGRhdGluZyBhdmF0YXIgaW1hZ2VcIik7XHJcbiAgICAgICAgYXBpLnVwZGF0ZUF2YXRhcihkYXRhKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5hdmF0YXIgPT09IGRhdGEubGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGFyZFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUF2YXRhclBvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJBdmF0YXIgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9yZWZyZXNoU2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckluZm8uc2V0QXZhdGFyKGRhdGEubGluayk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBjaGFuZ2luZyBBdmF0YXIgaW1hZ2VcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goe1xyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUF2YXRhclBvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJTYXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcbn0pXHJcblxyXG4vLy0tXHJcbi8vRm9ybSBWYWxpZGF0b3Igc2V0dGluZ3NcclxuLy8tLVxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRGb3JtQ29uZmlnLCB1c2VySW5mb1BvcHVwLnBvcHVwRWxlbWVudCk7XHJcbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRGb3JtQ29uZmlnLCBuZXdDYXJkUG9wdXAucG9wdXBFbGVtZW50KTtcclxuY29uc3QgY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRGb3JtQ29uZmlnLCBjaGFuZ2VBdmF0YXJQb3B1cC5wb3B1cEVsZW1lbnQpO1xyXG4vLy0tXHJcbi8vRXZlbnRMaXN0ZW5lcnNcclxuLy8tLVxyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnVzZXJJbmZvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNoYW5nZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vLS1cclxuLy9Jbml0aWFsIENhcmRzIC8gUGxhY2VzXHJcbi8vLS1cclxuLy9jYXJkc0xpc3QucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuXHJcbi8vLS1cclxuLy9FbmFibGUgRm9ybSBWYWxpZGF0b3JzXHJcbi8vLS1cclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wbGFjZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuLy8tLVxyXG4vL0RPTSB0byBKU1xyXG4vLy0tXHJcblxyXG5jb25zdCBvcGVuUHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcclxuY29uc3Qgb3BlblBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XHJcbmNvbnN0IG9wZW5BdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ0bicpO1xyXG5jb25zdCBvcGVuUHJvZmlsZUZvcm1XaXRoQ3VycmVudEluZm8gPSAoKSA9PiB7XHJcbiAgICB1c2VySW5mb1BvcHVwLm9wZW4oKTtcclxuICAgIHVzZXJJbmZvUG9wdXAucHJlZmlsbEZvcm0odXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbiAgICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufVxyXG5cclxub3BlblByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblByb2ZpbGVGb3JtV2l0aEN1cnJlbnRJbmZvKTtcclxuXHJcbmNvbnN0IG9wZW5QbGFjZUZvcm1FbXB0eSA9ICgpID0+IHtcclxuICAgIG5ld0NhcmRQb3B1cC5vcGVuKCk7XHJcbiAgICBwbGFjZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn1cclxub3BlblBsYWNlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5QbGFjZUZvcm1FbXB0eSk7XHJcbmNvbnN0IGNoYW5nZUF2YXRhckltYWdlID0gKCkgPT4ge1xyXG4gICAgY2hhbmdlQXZhdGFyUG9wdXAub3BlbigpO1xyXG4gICAgY2hhbmdlQXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufVxyXG5vcGVuQXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoYW5nZUF2YXRhckltYWdlKTsiLCIgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgICB0aGlzLm5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgICB0aGlzLmpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgICAgICAgdGhpcy5hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICAgfVxyXG5cclxuICAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgICBqb2I6IHRoaXMuam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgICB9XHJcblxyXG4gICAgIHNldFVzZXJJbmZvKHsgdXNlck5hbWUsIGpvYiwgdXNlcklEIH0pIHtcclxuICAgICAgICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xyXG4gICAgICAgICB0aGlzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICAgICAgIHRoaXMudXNlcklEID0gdXNlcklEO1xyXG4gICAgICAgICAvL3RoaXMuYXZhdGFyRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YXZhdGFyVVJMfSlgO1xyXG4gICAgIH1cclxuICAgICBnZXRVc2VySUQoKSB7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLnVzZXJJRDtcclxuICAgICB9XHJcbiAgICAgc2V0QXZhdGFyKGF2YXRhclVSTCkge1xyXG4gICAgICAgICB0aGlzLmF2YXRhckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2F2YXRhclVSTH0pYDtcclxuICAgICB9XHJcblxyXG4gfVxyXG4gZXhwb3J0IGRlZmF1bHQgVXNlckluZm87IiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IC8qaXRlbXMsKi8gcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICAvL3RoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy8oKTtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBvcGVuID0gKHsgbGluaywgbmFtZSB9KSA9PiB7XHJcbiAgICAgICAgLy9wdXRzIG5hbWUgZnJvbSBhcmdzIHRvIHRoZSAucG9wdXBfX2NhcHRpb24gc2VsZWN0b3JcclxuICAgICAgICBjb25zdCBpbWFnZUNhcHRpb24gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLXRpdGxlJyk7XHJcbiAgICAgICAgaW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICAvL2ZpbmQgaW1hZ2UgYnkgdGhlIFwiLnBvcHVwX19pbWFnZVwiIHNlbGVjdG9yLCBzZXQgYWx0IGFuZCBzcmMgZm9yIGl0XHJcbiAgICAgICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG4gICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xyXG4gICAgICAgIGltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gICAgICAgIC8vY2FsbCBzdXBlci5vcGVuKCk7IFxyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0IH0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgLy90aGlzLnBvcHVwRWxlbWVudFxyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9jb25maXJtYXRpb24gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbmZpcm1hdGlvbicpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX2NvbmZpcm1hdGlvbi5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xyXG4gICAgfVxyXG4gICAgX2NvbmZpcm1TdWJtaXQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLmNhcmQpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIG9wZW4oY2FyZCkge1xyXG4gICAgICAgIHRoaXMuY2FyZCA9IGNhcmQ7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlybWF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4gdGhpcy5fY29uZmlybVN1Ym1pdChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgY2hhbmdlU3VibWl0QnRuVGV4dChtc2cgPSBcInNhdmluZ1wiKSB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbXNnO1xyXG4gICAgfVxyXG5cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtYXRpb247Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaGlkZUlucHV0RXJyb3IiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImRlZmF1bHRGb3JtQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwicG9wdXBTZWxlY3RvciIsInBvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY1VwIiwiYmluZCIsImNsb3NlIiwib3BlbiIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiX2hhbmRsZU92ZXJsYXlDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtIiwicmVzZXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdG4iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsIm5hbWUiLCJ2YWx1ZSIsImNoYW5nZVN1Ym1pdEJ0blRleHQiLCJtc2ciLCJfZm9ybVN1Ym1pdCIsInByZWZpbGxGb3JtIiwiYXBpIiwiYmFzZVVSTCIsImhlYWRlcnMiLCJfY3VzdG9tRmV0Y2giLCJ1cmwiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGUiLCJ1c2VyTmFtZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSUQiLCJnZXRMaWtlc0NvdW50IiwicmVzdWx0IiwibGlrZXMiLCJsZW5ndGgiLCJpc015Q2FyZCIsIm93bmVyIiwiX2lkIiwiYXV0aG9yaXNhdGlvbiIsImxpa2VDYXJkIiwidW5saWtlQ2FyZCIsInVwZGF0ZUF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJhdmF0YXJFbGVtZW50Iiwiam9iIiwic2V0VXNlckluZm8iLCJ1c2VySUQiLCJnZXRVc2VySUQiLCJzZXRBdmF0YXIiLCJhdmF0YXJVUkwiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInJlbmRlckNhcmQiLCJkYXRhIiwiY2FuRGVsZXRlIiwibXlJRCIsImNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiX3RpdGxlIiwiX2ltYWdlVXJsIiwiX2NhcmRJRCIsIl9vd25lcklEIiwiX2xpa2VzIiwiX2hhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmRDbGljayIsIl9jb25maXJtRGVsZXRlIiwiY29uZmlybURlbGV0ZSIsIl90b2dnbGVNeUxpa2VUbyIsInRvZ2dsZU15TGlrZVRvIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZG9JTGlrZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYWRkRGF0YVRvQ2FyZCIsInRpdGxlIiwiaW1hZ2UiLCJsaWtlc0NvdW50IiwidW5kZWZpbmVkIiwic3JjIiwiYWx0IiwiaWRPZkxpa2VyIiwiX215SUQiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJkZWxldGVCdG4iLCJsaWtlQnRuIiwiaXNMaWtlZEJ5TWUiLCJmaW5kIiwiX3NldExpa2VJY29uIiwiTnVtYmVyIiwiZ2VuZXJhdGVDYXJkIiwiZ2V0SUQiLCJvcGVuSW1hZ2VQb3B1cCIsImNhcmRUb0RlbGV0ZSIsIm9wZW5EZWxldGVDb25maXJtYXRpb25Qb3B1cCIsImNhcmRzTGlzdCIsImFkZEl0ZW0iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJhbGwiLCJjYXJkRGF0YSIsInVzZXJEYXRhIiwiaW1hZ2VQb3B1cCIsImltYWdlRWxlbWVudCIsInVzZXJJbmZvUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZmluYWxseSIsImRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9jb25maXJtYXRpb24iLCJfY29uZmlybVN1Ym1pdCIsImV2ZW50IiwibWVzc2FnZSIsImVycm9yIiwibmV3Q2FyZFBvcHVwIiwiY2hhbmdlQXZhdGFyUG9wdXAiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yIiwib3BlblByb2ZpbGVGb3JtIiwib3BlblBsYWNlRm9ybSIsIm9wZW5BdmF0YXJGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==