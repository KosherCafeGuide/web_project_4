!function(){"use strict";var e=class{constructor(e,t){this.settings=e,this.formElement=t}_hideInputError(e){const t=this.formElement.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this.settings.errorClass),e.classList.remove(this.settings.inputErrorClass)}_showInputError(e){const t=this.formElement.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this.settings.errorClass),e.classList.add(this.settings.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this.inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this.button.classList.add(this.settings.inactiveButtonClass),this.button.disabled=!0):(this.button.classList.remove(this.settings.inactiveButtonClass),this.button.disabled=!1)}_setEventListners(){this.inputList=[...this.formElement.querySelectorAll(this.settings.inputSelector)],this.button=this.formElement.querySelector(this.settings.submitButtonSelector),this.inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this.formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListners()}resetValidation(){this.inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};const t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};var s=class{constructor(e){this.popupElement=document.querySelector(e),this._handleEscUp=this._handleEscUp.bind(this),this.close=this.close.bind(this),this.open=this.open.bind(this)}_handleEscUp(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this.popupElement.querySelector(".cancel").addEventListener("click",this.close),this.popupElement.addEventListener("mousedown",(e=>{e.target===this.popupElement&&this.close()}))}_handleOverlayClick(e){e.target===this.popupElement&&this.close()}open(){this.popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscUp)}close(){this.popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscUp)}},i=class extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;var i,n;super(t),n=()=>{this._form.reset(),super.close()},(i="close")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this._handleFormSubmit=s,this._form=this.popupElement.querySelector(".popup__form"),this._submitBtn=this._form.querySelector(".popup__button")}_getInputValues(){const e=[...this._form.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}_formSubmit(){console.log("this form",this._form),this._submitBtn.textContent="Saving...",console.log(this._submitBtn.textContent),this._handleFormSubmit(this._getInputValues()),this._submitBtn.textContent="Save",console.log(this._submitBtn.textContent),this.close(),alert("What's on the button")}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>this._formSubmit(e)))}prefillForm(e){[...this._form.querySelectorAll(".popup__input")].forEach((t=>{t.value=e[t.name]}))}};const n=new class{constructor(e){let{baseURL:t,headers:s}=e;this.baseURL=t,this.headers=s}_customFetch(e){return fetch(e,{method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",headers:this.headers}).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch((e=>{console.log(e)}))}getInitialCards(){return this._customFetch("".concat(this.baseURL,"/cards"))}getUserInfo(){return this._customFetch("".concat(this.baseURL,"/users/me"))}editProfile(e){let{userName:t,about:s}=e;return fetch("".concat(this.baseURL,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:s})})}addCard(e){let{name:t,link:s}=e;return fetch("".concat(this.baseURL,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:s})})}deleteCard(e){return this._customFetch("".concat(this.baseURL,"/cards/").concat(e),"DELETE")}getLikesCount(e){return fetch("".concat(this.baseURL,"/cards").concat(e),{headers:this.headers}).then((e=>e.json())).then((e=>e.likes.length))}isMyCard(e){return fetch("".concat(this.baseURL,"/cards/").concat(e),{headers:this.headers}).then((e=>e.json())).then((e=>e.owner._id===this.authorisation))}likeCard(e){return this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"PUT")}unlikeCard(e){return this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"DELETE")}updateAvatar(e){let{link:t}=e;return console.log("link",t),fetch("".concat(this.baseURL,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch((e=>{console.log(e)}))}}({baseURL:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"077e02f5-469c-4925-a110-e7daac9f6ead","Content-Type":"application/json"}});const r=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this.nameElement=document.querySelector(t),this.jobElement=document.querySelector(s),this.avatarElement=document.querySelector(i)}getUserInfo(){return{name:this.nameElement.textContent,job:this.jobElement.textContent}}setUserInfo(e){let{userName:t,job:s,userID:i,avatarURL:n}=e;this.nameElement.textContent=t,this.jobElement.textContent=s,this.userID=i,this.avatarElement.style.backgroundImage="url(".concat(n,")")}getUserID(){return this.userID}setAvatar(e){this.avatarElement.style.backgroundImage="url(".concat(e,")")}}({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"}),o=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:e=>{let t=e.owner._id===a;const s=new class{constructor(e,t){this._title=e.data.name,this._imageUrl=e.data.link,this._cardID=e.data._id,this._ownerID=e.data.owner._id,this._likes=e.data.likes,this._handleCardClick=e.handleCardClick,this._confirmDelete=e.confirmDelete,this._toggleMyLikeTo=e.toggleMyLikeTo,this._templateSelector=t,this._doILike=this._doILike.bind(this)}_getTemplate(){this._cardElement=document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_addDataToCard(){this.title=this._cardElement.querySelector(".element__image-title"),this.image=this._cardElement.querySelector(".element__image"),this.likesCount=this._cardElement.querySelector(".element__likes-count"),void 0===this._likes&&(this._likes=[]),this.likesCount.textContent=this._likes.length,this.title.textContent=this._title,this.image.src=this._imageUrl,this.image.alt=this._title}deleteCard(){this._cardElement.remove(),this._cardElement=null}_doILike(e){return e._id===this._myID}_addEventListeners(e){const t=this._cardElement.querySelector(".element__delete-btn");e?(t.classList.remove("hide"),t.addEventListener("click",(()=>{this._confirmDelete(this._cardID)}))):t.classList.add("hide"),this.likeBtn=this._cardElement.querySelector(".element__like-toggle"),this.isLikedByMe=this._likes.find(this._doILike),this._setLikeIcon(),this.likeBtn.addEventListener("click",(()=>{this.isLikedByMe=!this.isLikedByMe,this.isLikedByMe?this.likesCount.textContent=Number(this.likesCount.textContent)+1:this.likesCount.textContent=Number(this.likesCount.textContent)-1,this._toggleMyLikeTo(this._cardID,this.isLikedByMe),this._setLikeIcon()})),this.image.addEventListener("click",(()=>{this._handleCardClick({link:this._imageUrl,name:this._title})}))}_setLikeIcon(){this.isLikedByMe?this.likeBtn.classList.add("element__like-toggle-active"):this.likeBtn.classList.remove("element__like-toggle-active")}generateCard(e,t){return this._myID=t,this._getTemplate(),this._addDataToCard(),this._addEventListeners(e),this._cardElement}}({data:e,handleCardClick:()=>{d(e)},confirmDelete:e=>{m(e)},toggleMyLikeTo:(e,t)=>{t?n.likeCard(e):n.unlikeCard(e)}},"#element");o.addItem(s.generateCard(t,a))}},".elements");let a="0",l=!1;function h(){Promise.all([n.getInitialCards(),n.getUserInfo()]).then((e=>{let[t,s]=e;!0===l&&(location.href=location.href,l=!1),a=s._id,o.renderItems(t),r.setUserInfo({userName:s.name,job:s.about,userID:s._id,avatarURL:s.avatar})}))}h();const c=new class extends s{constructor(){var e,t;super(...arguments),t=e=>{let{link:t,name:s}=e;this.popupElement.querySelector(".popup__image-title").textContent=s;const i=this.popupElement.querySelector(".popup__image");i.src=t,i.alt=s,super.open()},(e="open")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this.open=t}}(".popup-image"),d=e=>{c.open(e)},u=new i({popupSelector:".popup-profile-form",handleFormSubmit:e=>{n.editProfile({userName:e.name,about:e.job}).then((t=>{t.ok?(r.setUserInfo({userName:e.name,job:e.job}),l=!0):(console.log("error updating User Profile"),console.log(t.statusText))})).finally((e=>{}))}}),p=new class extends s{constructor(e){let{popupSelector:t,handleSubmit:s}=e;super(t),this._handleSubmit=s,this._confirmation=this.popupElement.querySelector(".popup__confirmation")}_confirmSubmit(e){e.preventDefault(),this._handleSubmit(this.cardID),this.close()}open(e){console.log("Popup with Confirmation Open for deleting Card ID ",e),this.cardID=e,super.open()}setEventListeners(){super.setEventListeners(),this._confirmation.addEventListener("submit",(e=>this._confirmSubmit(e)))}}({popupSelector:".popup-delete-confirmation",handleSubmit:e=>{n.deleteCard(e).then((e=>{"This post has been deleted"===e.message?(l=!0,h()):reject("error while deleting image from server")})).catch((e=>{console.log(e)}))}}),m=e=>{p.open(e)},_=new i({popupSelector:".popup-place-form",handleFormSubmit:e=>{n.addCard(e).then((t=>{e.owner={_id:r.getUserID()},t.ok?(l=!0,h()):console.log("Error adding Card")}))}}),g=new i({popupSelector:".popup-avatar-form",handleFormSubmit:e=>{n.updateAvatar(e).then((t=>{t.avatar===e.link?(l=!0,h()):console.log("Error changing Avatar image")}))}}),b=new e(t,u.popupElement),E=new e(t,_.popupElement),v=new e(t,g.popupElement);c.setEventListeners(),u.setEventListeners(),_.setEventListeners(),p.setEventListeners(),g.setEventListeners(),b.enableValidation(),E.enableValidation(),v.enableValidation();const f=document.querySelector(".profile__edit-btn"),L=document.querySelector(".profile__add-btn"),k=document.querySelector(".profile__edit-avatar-btn");f.addEventListener("click",(()=>{u.open(),u.prefillForm(r.getUserInfo()),b.resetValidation()})),L.addEventListener("click",(()=>{_.open(),E.resetValidation()})),k.addEventListener("click",(()=>{g.open(),v.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxtQkFLMUIsTUFBTTBLLEVBQWtCbEssU0FBU25DLGNBQWMsc0JBQ3pDc00sRUFBZ0JuSyxTQUFTbkMsY0FBYyxxQkFDdkN1TSxFQUFpQnBLLFNBQVNuQyxjQUFjLDZCQU85Q3FNLEVBQWdCM0ssaUJBQWlCLFNBTk0sS0FDbkMwSixFQUFjN0ksT0FDZDZJLEVBQWN0SCxZQUFZMEMsRUFBU3hCLGVBQ25DaUgsRUFBcUJuSyxxQkFTekJ3SyxFQUFjNUssaUJBQWlCLFNBSkosS0FDdkJxSyxFQUFheEosT0FDYjRKLEVBQW1CcksscUJBT3ZCeUssRUFBZTdLLGlCQUFpQixTQUpOLEtBQ3RCc0ssRUFBa0J6SixPQUNsQjZKLEVBQTBCdEsscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9DYXJkIGNsYXNzIHdpdGggRXhwb3J0XHJcbmNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gZGF0YS5kYXRhLm5hbWU7IC8vbm90IHN1cmUgd2h5IEkgbmVlZCB0aGUgZXh0cmEgXCJkYXRhLlwiIGhlcmUhXHJcbiAgICAgICAgdGhpcy5faW1hZ2VVcmwgPSBkYXRhLmRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9jYXJkSUQgPSBkYXRhLmRhdGEuX2lkO1xyXG4gICAgICAgIHRoaXMuX293bmVySUQgPSBkYXRhLmRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5kYXRhLmxpa2VzO1xyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBkYXRhLmhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlID0gZGF0YS5jb25maXJtRGVsZXRlOyAvL3JldHVybnMgdHJ1ZSBpZiBzaG91bGQgZGVsZXRlIFxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZU15TGlrZVRvID0gZGF0YS50b2dnbGVNeUxpa2VUbzsgLy90b2dnbGUgbGlrZSBzdGF0dXMgb24gc2VydmVyXHJcblxyXG5cclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjsgLy8gXCIjY2FyZC10ZW1wbGF0ZVwiXHJcblxyXG4gICAgICAgIHRoaXMuX2RvSUxpa2UgPSB0aGlzLl9kb0lMaWtlLmJpbmQodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgfVxyXG4gICAgX2FkZERhdGFUb0NhcmQoKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2UtdGl0bGVcIik7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5saWtlc0NvdW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlcy1jb3VudFwiKTtcclxuICAgICAgICBpZiAodGhpcy5fbGlrZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpa2VzQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy50aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2VVcmw7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIH1cclxuICAgIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7IC8vdGhpcy5fY2FyZEVsZW1lbnQ9bnVsbDsgZG9lcyBub3Qgd29ya1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIF9kb0lMaWtlKGlkT2ZMaWtlcikge1xyXG4gICAgICAgIHJldHVybiBpZE9mTGlrZXIuX2lkID09PSB0aGlzLl9teUlEO1xyXG4gICAgfVxyXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJzKGNhbkRlbGV0ZSkge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ0blwiKVxyXG4gICAgICAgIGlmIChjYW5EZWxldGUpIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpcm1EZWxldGUodGhpcy5fY2FyZElEKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLXRvZ2dsZVwiKTtcclxuICAgICAgICB0aGlzLmlzTGlrZWRCeU1lID0gdGhpcy5fbGlrZXMuZmluZCh0aGlzLl9kb0lMaWtlKTtcclxuICAgICAgICB0aGlzLl9zZXRMaWtlSWNvbigpO1xyXG4gICAgICAgIHRoaXMubGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzTGlrZWRCeU1lID0gIXRoaXMuaXNMaWtlZEJ5TWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTGlrZWRCeU1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpa2VzQ291bnQudGV4dENvbnRlbnQgPSBOdW1iZXIodGhpcy5saWtlc0NvdW50LnRleHRDb250ZW50KSArIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpa2VzQ291bnQudGV4dENvbnRlbnQgPSBOdW1iZXIodGhpcy5saWtlc0NvdW50LnRleHRDb250ZW50KSAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlTXlMaWtlVG8odGhpcy5fY2FyZElELCB0aGlzLmlzTGlrZWRCeU1lKTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TGlrZUljb24oKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcclxuICAgICAgICAgICAgICAgIGxpbms6IHRoaXMuX2ltYWdlVXJsLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fdGl0bGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfc2V0TGlrZUljb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNMaWtlZEJ5TWUpIHtcclxuICAgICAgICAgICAgdGhpcy5saWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlLXRvZ2dsZS1hY3RpdmVcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5saWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19saWtlLXRvZ2dsZS1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYXJkKGNhbkRlbGV0ZSwgbXlJRCkge1xyXG4gICAgICAgIHRoaXMuX215SUQgPSBteUlEO1xyXG4gICAgICAgIHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fYWRkRGF0YVRvQ2FyZCgpO1xyXG4gICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKGNhbkRlbGV0ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsiLCIvL2NsYXNzIEZvcm1WYWxpZGF0b3Igd2l0aCBFeHBvcnRcclxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7IC8vc2VsZWN0b3JzIGFuZCBmb3JtIGNsYXNzZXNcclxuICAgICAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7IC8vZm9ybSBlbGVtZW50IHRvIGJlIHZhbGlkYXRlZFxyXG4gICAgfVxyXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHsgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgfSlcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpXHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldEV2ZW50TGlzdG5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dExpc3QgPSBbLi4udGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3MuaW5wdXRTZWxlY3RvcildO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH1cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdG5lcnMoKTtcclxuXHJcbiAgICB9XHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpIC8vY2xlYXJpbmcgZXJyb3JzIGV2ZW4gaWYgdXNlciBhY2NpZGVudGx5IGxlYXZlcyB0aGUgZm9ybSB3aXRoIGVycm9ycyBvbiBpdCEgICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyAvLyBjb250cm9sbGluZyB0aGUgc3VibWl0IGJ1dHRvbiBcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImV4cG9ydCBjb25zdCBkZWZhdWx0Rm9ybUNvbmZpZyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpZyA9IHtcclxuICAgIGltYWdlTW9kYWxXaW5kb3c6IFwiLnBvcHVwLWltYWdlXCIsXHJcbiAgICBlZGl0Rm9ybU1vZGFsV2luZG93OiBcIi5wb3B1cC1wcm9maWxlLWZvcm1cIixcclxuICAgIGNhcmRGb3JtTW9kYWxXaW5kb3c6IFwiLnBvcHVwLXBsYWNlLWZvcm1cIixcclxuICAgIGRlbGV0ZUNvbmZpcm1hdGlvbldpbmRvdzogXCIucG9wdXAtZGVsZXRlLWNvbmZpcm1hdGlvblwiLFxyXG4gICAgY2hhbmdlQXZhdGFyTW9kYWxXaW5kb3c6IFwiLnBvcHVwLWF2YXRhci1mb3JtXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQ29uZmlnID0ge1xyXG4gICAgcHJvZmlsZVRpdGxlOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2pvYlwiLFxyXG4gICAgcHJvZmlsZUF2YXRhckltYWdlOiBcIi5wcm9maWxlX19hdmF0YXJcIlxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29uZmlnID0ge1xyXG4gICAgY2FyZFNlbGVjdG9yOiBcIiNlbGVtZW50XCIsIC8vQ2FyZC4gdGVtcGxhdGVTZWxlY3RvciAgXHJcbiAgICBwbGFjZXN3cmFwOiBcIi5lbGVtZW50c1wiLCAvL1NlY3Rpb24uY29udGFpbmVyU2VsZWN0b3JcclxufTtcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvbkNvbmZpZyA9IHtcclxuICAgIHByb2ZpbGU6IFwiLmVkaXQtcHJvZmlsZS1mb3JtX19zYXZlXCIsXHJcbiAgICBhdmF0YXI6IFwiLnVwZGF0ZS1hdmF0YXItZm9ybV9fc2F2ZVwiLFxyXG4gICAgY2FyZDogXCIuYWRkLXBsYWNlLWZvcm1fX3NhdmVcIlxyXG59IiwiY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NVcCA9IHRoaXMuX2hhbmRsZUVzY1VwLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjVXAoZXZ0KSB7XHJcbiAgICAgICAgLy9wcmV2ZW50IGRlZmF1bHQgYW5kIGlmIGJ1dHRvbiB3YXMgRXNjIGNhbGwgY2xvc2UgbWV0aG9kXHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy9jcmVhdGUgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGNsaWNrIG9uIGNsb3NlIGJ1dHRvbiBvciBzZW1pdHJhbnNwYXJlbnQgYmFja2dyb3VuZFxyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UpOyAvL2Nsb3NlIGJ1dHRvblxyXG4gICAgICAgIC8vc3VnZ2VzdGlvbiBvZiBtb3VzZWRvd24gdXNlZC4gZXZlbnRMaXN0ZW5lcnMgdXNpbmcgYXJyb3cgZnVuY3Rpb25zIGNhbid0IGJlIHJlbW92ZWQsXHJcbiAgICAgICAgLy8gYW5kIGlmIEkgZG9uJ3QgdXNlIGFuIGFycm93IGZ1bmN0aW9uIEkgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gYm90aCBldnQudGFyZ2V0IGFuZCB0aGlzLnBvcHVwRWxlbWVudFxyXG4gICAgICAgIC8vIHNvIGlmIEkgY2FuJ3QgcmVtb3ZlIGl0IGluIGNsb3NlLCBJJ20gbm90IGdvaW5nIHRvIGNyZWF0ZSBhIG5ldyBvbiB3aXRoIGVhY2ggb3BlbiE5MC0vODQ3MjQyNTQ1MTEzMiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsgLy9wb3B1cCBzZW1pdHJhbnNwYXJlbnQgYmFja2dyb3VuZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfaGFuZGxlT3ZlcmxheUNsaWNrKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLnBvcHVwRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7IC8vcG9wdXAgc2VtaXRyYW5zcGFyZW50IGJhY2tncm91bmRcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIC8vYWRkIGEgbmV3IGNsYXNzIGFuZCBjcmVhdGVzIGFuIGV2ZW50bGlzdGVuZXIgZm9yIEVzYyBrZXl1cFxyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjVXApO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICAvL3JlbW92ZXMgdGhlIGNsYXNzIHdlIGFkZGVkIGFuZCB0aGUgZXZlbnRsaXN0ZW5lciBmb3IgdGhlIEVzYyBrZXl1cFxyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cDsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyAvL3RoaXMucG9wdXBFbGVtZW50XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcclxuXHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpXTtcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gICAgfVxyXG4gICAgX2Zvcm1TdWJtaXQoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzIGZvcm1cIiwgdGhpcy5fZm9ybSk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICBhbGVydChcIldoYXQncyBvbiB0aGUgYnV0dG9uXCIpO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB0aGlzLl9mb3JtU3VibWl0KGV2dCkpO1xyXG4gICAgfVxyXG4gICAgY2xvc2UgPSAoKSA9PiB7IC8vYXJyb3cgZnVuY3Rpb24gbWV0aG9kLCByZXRhaW5zIGNvbnRleHQgd2l0aG91dCBuZWVkIGZvciAuYmluZCh0aGlzKVxyXG5cclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVmaWxsRm9ybShpbnB1dFZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKV07XHJcbiAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiY2xhc3MgQVBJIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVSTCwgaGVhZGVycyB9KSB7XHJcbiAgICAgICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcclxuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG4gICAgX2N1c3RvbUZldGNoKHVybCwgbWV0aG9kID0gXCJHRVRcIikgeyAvL3VzZWQgaW50ZXJuYWxseVxyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7IC8vaW5kZXguanMgbGluZSA2NlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzYCk7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHsgLy9pbmRleC5qcyBMaW5lIDY2IGFuZCAxODZcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS91c2Vycy9tZWApO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXRQcm9maWxlKHsgdXNlck5hbWUsIGFib3V0IH0pIHsgLy9pbmRleC5qcyBMaW5lIDkxXHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7IC8vaW5kZXguanMgTGluZSAxMzZcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgbGluazogbGlua1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGRlbGV0ZUNhcmQoY2FyZElEKSB7IC8vaW5kZXguanMgTGluZSAxMDlcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkcy8ke2NhcmRJRH1gLCBcIkRFTEVURVwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvKk5vdCB1c2VkIHlldCovXHJcbiAgICBnZXRMaWtlc0NvdW50KGNhcmRJRCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkcyR7Y2FyZElEfWAsIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Lmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKk5vdCB1c2VkIHlldCovXHJcbiAgICBpc015Q2FyZChjYXJkSUQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3duZXIuX2lkID09PSB0aGlzLmF1dGhvcmlzYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsaWtlQ2FyZChjYXJkSUQpIHsgLy9pbmRleC5qcyBMaW5lIDQ4XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVSTH0vY2FyZHMvbGlrZXMvJHtjYXJkSUR9YCwgXCJQVVRcIik7XHJcbiAgICB9XHJcbiAgICB1bmxpa2VDYXJkKGNhcmRJRCkgeyAvL2luZGV4LmpzIExpbmUgNTBcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCBcIkRFTEVURVwiKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUF2YXRhcih7IGxpbmsgfSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibGlua1wiLCBsaW5rKTtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVVJMfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IGxpbmtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1c1RleHQpKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFQSSh7XHJcbiAgICBiYXNlVVJMOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjA3N2UwMmY1LTQ2OWMtNDkyNS1hMTEwLWU3ZGFhYzlmNmVhZFwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICB9XHJcbn0pOyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbi8qaW1wb3J0IGF2YXRhciBmcm9tIFwiLi4vaW1hZ2VzL2F2YXRhci5qcGdcIjtcclxuY29uc3QgYXZhdGFyUHJvZmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5hdmF0YXJQcm9maWxlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJ9KWA7Ki9cclxuLy9pbXBvcnQgYW5kIGltcGxlbWVudCBjbGFzc2VzIGZyb20gQ2FyZCBhbmQgRm9ybVZhbGlkYXRvciBcclxuLy9hbmQgaW1wbGVtZW50IGZ1bmN0aW9ucyBpbiB1dGlscywgdXNpbmcgcHJlc2V0IGNhcmRzXHJcblxyXG4vLy0tXHJcbi8vaW1wb3J0IHN0YXRlbWVudHNcclxuLy8tLVxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IHsgZGVmYXVsdEZvcm1Db25maWcsIHBvcHVwQ29uZmlnLCBwcm9maWxlQ29uZmlnLCBjYXJkc0NvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uXCI7XHJcblxyXG5cclxuLy8tLVxyXG4vL1Byb2ZpbGUgU2V0dXBcclxuLy8tLVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgbmFtZVNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVUaXRsZSxcclxuICAgIGpvYlNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVEZXNjcmlwdGlvbixcclxuICAgIGF2YXRhclNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVBdmF0YXJJbWFnZVxyXG59KTtcclxuXHJcbi8vLS1cclxuLy9DYXJkcyBTZXR1cFxyXG4vLy0tXHJcblxyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgICBsZXQgY2FuRGVsZXRlID0gKChkYXRhLm93bmVyLl9pZCA9PT0gbXlJRCkgPyB0cnVlIDogZmFsc2UpO1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICBvcGVuSW1hZ2VQb3B1cChkYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbmZpcm1EZWxldGU6IChjYXJkSUQpID0+IHtcclxuICAgICAgICAgICAgb3BlbkRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwKGNhcmRJRClcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvZ2dsZU15TGlrZVRvOiAoY2FyZElELCBpc0xpa2VkQnlNZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNMaWtlZEJ5TWUpIHtcclxuICAgICAgICAgICAgICAgIGFwaS5saWtlQ2FyZChjYXJkSUQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBpLnVubGlrZUNhcmQoY2FyZElEKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LCBjYXJkc0NvbmZpZy5jYXJkU2VsZWN0b3IpO1xyXG4gICAgY2FyZHNMaXN0LmFkZEl0ZW0oY2FyZC5nZW5lcmF0ZUNhcmQoY2FuRGVsZXRlLCBteUlEKSk7XHJcbn1cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbn0sIGNhcmRzQ29uZmlnLnBsYWNlc3dyYXApO1xyXG5cclxubGV0IG15SUQgPSBcIjBcIjtcclxubGV0IGhhcmRSZWZyZXNoID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiByZWZyZXNoU2NyZWVuKCkge1xyXG4gICAgUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG4gICAgICAgIC50aGVuKChbY2FyZERhdGEsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaGFyZFJlZnJlc2ggPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICAgICAgaGFyZFJlZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBteUlEID0gdXNlckRhdGEuX2lkO1xyXG5cclxuICAgICAgICAgICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGNhcmREYXRhKTtcclxuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyB1c2VyTmFtZTogdXNlckRhdGEubmFtZSwgam9iOiB1c2VyRGF0YS5hYm91dCwgdXNlcklEOiB1c2VyRGF0YS5faWQsIGF2YXRhclVSTDogdXNlckRhdGEuYXZhdGFyIH0pO1xyXG4gICAgICAgIH0pXHJcblxyXG59XHJcbnJlZnJlc2hTY3JlZW4oKTtcclxuLy8tLVxyXG4vL0ltYWdlIFBvcHVwIFNldHVwXHJcbi8vLS1cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cENvbmZpZy5pbWFnZU1vZGFsV2luZG93KTtcclxuY29uc3Qgb3BlbkltYWdlUG9wdXAgPSAoZGF0YSkgPT4geyBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7IH07XHJcbi8vLS1cclxuLy9TdWJtaXRCdXR0b24gVGV4dENvbnRlbnRcclxuLy8tLVxyXG4vL2NvbnN0IHVzZXJJbmZvU3VibWl0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VibWl0QnV0dG9uQ29uZmlnLnByb2ZpbGUpLlxyXG4vLy0tXHJcbi8vVXNlciBJbmZvIFBvcHVwIFNldHVwXHJcbi8vLS1cclxuY29uc3QgdXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlnLmVkaXRGb3JtTW9kYWxXaW5kb3csXHJcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICBhcGkuZWRpdFByb2ZpbGUoeyB1c2VyTmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5qb2IgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJOYW1lOiBkYXRhLm5hbWUsIGpvYjogZGF0YS5qb2IgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFyZFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVmcmVzaFNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIHVwZGF0aW5nIFVzZXIgUHJvZmlsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KHJlcyA9PiB7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG59KTtcclxuY29uc3QgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlnLmRlbGV0ZUNvbmZpcm1hdGlvbldpbmRvdyxcclxuICAgIGhhbmRsZVN1Ym1pdDogKGNhcmRJRCkgPT4ge1xyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJRClcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLm1lc3NhZ2UgPT09IFwiVGhpcyBwb3N0IGhhcyBiZWVuIGRlbGV0ZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhcmRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoU2NyZWVuKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoXCJlcnJvciB3aGlsZSBkZWxldGluZyBpbWFnZSBmcm9tIHNlcnZlclwiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufSk7XHJcbmNvbnN0IG9wZW5EZWxldGVDb25maXJtYXRpb25Qb3B1cCA9IChkYXRhKSA9PiB7IGRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwLm9wZW4oZGF0YSk7IH07XHJcblxyXG4vLy0tXHJcbi8vQWRkIENhcmQgUG9wdXAgU2V0dXBcclxuLy8tLVxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpZy5jYXJkRm9ybU1vZGFsV2luZG93LFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuXHJcbiAgICAgICAgYXBpLmFkZENhcmQoZGF0YSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGRhdGEub3duZXIgPSB7IF9pZDogdXNlckluZm8uZ2V0VXNlcklEKCkgfTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICBoYXJkUmVmcmVzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVuZGVyQ2FyZChkYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgYWRkaW5nIENhcmRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlnLmNoYW5nZUF2YXRhck1vZGFsV2luZG93LFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuXHJcbiAgICAgICAgYXBpLnVwZGF0ZUF2YXRhcihkYXRhKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5hdmF0YXIgPT09IGRhdGEubGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhcmRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoU2NyZWVuKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBjaGFuZ2luZyBBdmF0YXIgaW1hZ2VcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufSlcclxuXHJcbi8vLS1cclxuLy9Gb3JtIFZhbGlkYXRvciBzZXR0aW5nc1xyXG4vLy0tXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIHVzZXJJbmZvUG9wdXAucG9wdXBFbGVtZW50KTtcclxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIG5ld0NhcmRQb3B1cC5wb3B1cEVsZW1lbnQpO1xyXG5jb25zdCBjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIGNoYW5nZUF2YXRhclBvcHVwLnBvcHVwRWxlbWVudCk7XHJcbi8vLS1cclxuLy9FdmVudExpc3RlbmVyc1xyXG4vLy0tXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2hhbmdlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8tLVxyXG4vL0luaXRpYWwgQ2FyZHMgLyBQbGFjZXNcclxuLy8tLVxyXG4vL2NhcmRzTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xyXG5cclxuLy8tLVxyXG4vL0VuYWJsZSBGb3JtIFZhbGlkYXRvcnNcclxuLy8tLVxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNoYW5nZUF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLy0tXHJcbi8vRE9NIHRvIEpTXHJcbi8vLS1cclxuXHJcbmNvbnN0IG9wZW5Qcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xyXG5jb25zdCBvcGVuUGxhY2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcclxuY29uc3Qgb3BlbkF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXItYnRuJyk7XHJcbmNvbnN0IG9wZW5Qcm9maWxlRm9ybVdpdGhDdXJyZW50SW5mbyA9ICgpID0+IHtcclxuICAgIHVzZXJJbmZvUG9wdXAub3BlbigpO1xyXG4gICAgdXNlckluZm9Qb3B1cC5wcmVmaWxsRm9ybSh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5vcGVuUHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUHJvZmlsZUZvcm1XaXRoQ3VycmVudEluZm8pO1xyXG5cclxuY29uc3Qgb3BlblBsYWNlRm9ybUVtcHR5ID0gKCkgPT4ge1xyXG4gICAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICAgIHBsYWNlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufVxyXG5vcGVuUGxhY2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBsYWNlRm9ybUVtcHR5KTtcclxuY29uc3QgY2hhbmdlQXZhdGFySW1hZ2UgPSAoKSA9PiB7XHJcbiAgICBjaGFuZ2VBdmF0YXJQb3B1cC5vcGVuKCk7XHJcbiAgICBjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcbm9wZW5BdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlQXZhdGFySW1hZ2UpOyIsIiBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgIHRoaXMubmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgIHRoaXMuam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgICAgICB0aGlzLmF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgICB9XHJcblxyXG4gICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgICBjb25zdCB1c2VyID0ge1xyXG4gICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgIGpvYjogdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgIH1cclxuXHJcbiAgICAgc2V0VXNlckluZm8oeyB1c2VyTmFtZSwgam9iLCB1c2VySUQsIGF2YXRhclVSTCB9KSB7XHJcbiAgICAgICAgIHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgICAgICAgdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgICAgICB0aGlzLnVzZXJJRCA9IHVzZXJJRDtcclxuICAgICAgICAgdGhpcy5hdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVUkx9KWA7XHJcbiAgICAgfVxyXG4gICAgIGdldFVzZXJJRCgpIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMudXNlcklEO1xyXG4gICAgIH1cclxuICAgICBzZXRBdmF0YXIoYXZhdGFyVVJMKSB7XHJcbiAgICAgICAgIHRoaXMuYXZhdGFyRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YXZhdGFyVVJMfSlgO1xyXG4gICAgIH1cclxuXHJcbiB9XHJcbiBleHBvcnQgZGVmYXVsdCBVc2VySW5mbzsiLCJjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgLyppdGVtcywqLyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIC8vdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvLygpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIG9wZW4gPSAoeyBsaW5rLCBuYW1lIH0pID0+IHtcclxuICAgICAgICAvL3B1dHMgbmFtZSBmcm9tIGFyZ3MgdG8gdGhlIC5wb3B1cF9fY2FwdGlvbiBzZWxlY3RvclxyXG4gICAgICAgIGNvbnN0IGltYWdlQ2FwdGlvbiA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtdGl0bGUnKTtcclxuICAgICAgICBpbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIC8vZmluZCBpbWFnZSBieSB0aGUgXCIucG9wdXBfX2ltYWdlXCIgc2VsZWN0b3IsIHNldCBhbHQgYW5kIHNyYyBmb3IgaXRcclxuICAgICAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgICAgICAgLy9jYWxsIHN1cGVyLm9wZW4oKTsgXHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQgfSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyAvL3RoaXMucG9wdXBFbGVtZW50XHJcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1hdGlvbiA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29uZmlybWF0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBfY29uZmlybVN1Ym1pdChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuY2FyZElEKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICBvcGVuKGNhcmRJRCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9wdXAgd2l0aCBDb25maXJtYXRpb24gT3BlbiBmb3IgZGVsZXRpbmcgQ2FyZCBJRCBcIiwgY2FyZElEKVxyXG4gICAgICAgIHRoaXMuY2FyZElEID0gY2FyZElEO1xyXG5cclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl9jb25maXJtYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB0aGlzLl9jb25maXJtU3VibWl0KGV2ZW50KSk7XHJcbiAgICB9XHJcblxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aENvbmZpcm1hdGlvbjsiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9oaWRlSW5wdXRFcnJvciIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJhZGQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiYnV0dG9uIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdG5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiZGVmYXVsdEZvcm1Db25maWciLCJmb3JtU2VsZWN0b3IiLCJwb3B1cFNlbGVjdG9yIiwicG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwiY2xvc2UiLCJvcGVuIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJfaGFuZGxlT3ZlcmxheUNsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2Zvcm0iLCJyZXNldCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ0biIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwiX2Zvcm1TdWJtaXQiLCJjb25zb2xlIiwibG9nIiwiYWxlcnQiLCJwcmVmaWxsRm9ybSIsImFwaSIsImJhc2VVUkwiLCJoZWFkZXJzIiwiX2N1c3RvbUZldGNoIiwidXJsIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1c1RleHQiLCJjYXRjaCIsImVyciIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGUiLCJ1c2VyTmFtZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSUQiLCJnZXRMaWtlc0NvdW50IiwicmVzdWx0IiwibGlrZXMiLCJsZW5ndGgiLCJpc015Q2FyZCIsIm93bmVyIiwiX2lkIiwiYXV0aG9yaXNhdGlvbiIsImxpa2VDYXJkIiwidW5saWtlQ2FyZCIsInVwZGF0ZUF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJhdmF0YXJFbGVtZW50Iiwiam9iIiwic2V0VXNlckluZm8iLCJ1c2VySUQiLCJhdmF0YXJVUkwiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImdldFVzZXJJRCIsInNldEF2YXRhciIsImNhcmRzTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJkYXRhIiwiY2FuRGVsZXRlIiwibXlJRCIsImNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiX3RpdGxlIiwiX2ltYWdlVXJsIiwiX2NhcmRJRCIsIl9vd25lcklEIiwiX2xpa2VzIiwiX2hhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmRDbGljayIsIl9jb25maXJtRGVsZXRlIiwiY29uZmlybURlbGV0ZSIsIl90b2dnbGVNeUxpa2VUbyIsInRvZ2dsZU15TGlrZVRvIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZG9JTGlrZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYWRkRGF0YVRvQ2FyZCIsInRpdGxlIiwiaW1hZ2UiLCJsaWtlc0NvdW50IiwidW5kZWZpbmVkIiwic3JjIiwiYWx0IiwiaWRPZkxpa2VyIiwiX215SUQiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJkZWxldGVCdG4iLCJsaWtlQnRuIiwiaXNMaWtlZEJ5TWUiLCJmaW5kIiwiX3NldExpa2VJY29uIiwiTnVtYmVyIiwiZ2VuZXJhdGVDYXJkIiwib3BlbkltYWdlUG9wdXAiLCJvcGVuRGVsZXRlQ29uZmlybWF0aW9uUG9wdXAiLCJoYXJkUmVmcmVzaCIsInJlZnJlc2hTY3JlZW4iLCJhbGwiLCJjYXJkRGF0YSIsInVzZXJEYXRhIiwibG9jYXRpb24iLCJocmVmIiwiaW1hZ2VQb3B1cCIsImltYWdlRWxlbWVudCIsInVzZXJJbmZvUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZmluYWxseSIsImRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9jb25maXJtYXRpb24iLCJfY29uZmlybVN1Ym1pdCIsImV2ZW50IiwibWVzc2FnZSIsImVycm9yIiwibmV3Q2FyZFBvcHVwIiwiY2hhbmdlQXZhdGFyUG9wdXAiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJwbGFjZUZvcm1WYWxpZGF0b3IiLCJjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yIiwib3BlblByb2ZpbGVGb3JtIiwib3BlblBsYWNlRm9ybSIsIm9wZW5BdmF0YXJGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==