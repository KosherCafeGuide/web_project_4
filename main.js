!function(){"use strict";var e=class{constructor(e,t){this._settings=e,this._formElement=t}_hideInputError(e){const t=this._formElement.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this._settings.errorClass),e.classList.remove(this._settings.inputErrorClass)}_showInputError(e){const t=this._formElement.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this.inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this.button.classList.add(this._settings.inactiveButtonClass),this.button.disabled=!0):(this.button.classList.remove(this._settings.inactiveButtonClass),this.button.disabled=!1)}_setEventListners(){this.inputList=[...this._formElement.querySelectorAll(this._settings.inputSelector)],this.button=this._formElement.querySelector(this._settings.submitButtonSelector),this.inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListners()}resetValidation(){this.inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}};const t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};var s=class{constructor(e){this.popupElement=document.querySelector(e),this._handleEscUp=this._handleEscUp.bind(this),this.close=this.close.bind(this),this.open=this.open.bind(this)}_handleEscUp(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this.popupElement.querySelector(".cancel").addEventListener("click",this.close),this.popupElement.addEventListener("mousedown",(e=>{e.target===this.popupElement&&this.close()}))}_handleOverlayClick(e){e.target===this.popupElement&&this.close()}open(){this.popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscUp)}close(){this.popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscUp)}},i=class extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;var i,n;super(t),n=()=>{this._form.reset(),super.close()},(i="close")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this._handleFormSubmit=s,this._form=this.popupElement.querySelector(".popup__form"),this._submitBtn=this._form.querySelector(".popup__button"),this._inputs=[...this._form.querySelectorAll(".popup__input")]}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}changeSubmitBtnText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"saving";this._submitBtn.textContent=e}_formSubmit(){this._handleFormSubmit(this._getInputValues())}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>this._formSubmit(e)))}prefillForm(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}};const n=new class{constructor(e){let{baseURL:t,headers:s}=e;this.baseURL=t,this.headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(e.statusText)}_customFetch(e){return fetch(e,{method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",headers:this.headers}).then(this._checkResponse)}getInitialCards(){return this._customFetch("".concat(this.baseURL,"/cards"))}getUserInfo(){return this._customFetch("".concat(this.baseURL,"/users/me"))}editProfile(e){let{userName:t,about:s}=e;return fetch("".concat(this.baseURL,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch("".concat(this.baseURL,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return this._customFetch("".concat(this.baseURL,"/cards/").concat(e),"DELETE")}getLikesCount(e){return console.log("getLikesCount cardID ",e),this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"GET").then((e=>(console.log("result",e),e.likes.length)))}isMyCard(e){return fetch("".concat(this.baseURL,"/cards/").concat(e),{headers:this.headers}).then(this._checkResponse).then((e=>e.owner._id===this.authorisation))}likeCard(e){return this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"PUT")}unlikeCard(e){return this._customFetch("".concat(this.baseURL,"/cards/likes/").concat(e),"DELETE")}updateAvatar(e){let{link:t}=e;return fetch("".concat(this.baseURL,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}}({baseURL:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"077e02f5-469c-4925-a110-e7daac9f6ead","Content-Type":"application/json"}});const r=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this.nameElement=document.querySelector(t),this.jobElement=document.querySelector(s),this.avatarElement=document.querySelector(i)}getUserInfo(){return{name:this.nameElement.textContent,job:this.jobElement.textContent}}setUserInfo(e){let{userName:t,job:s,userID:i,avatarURL:n}=e;this.nameElement.textContent=t,this.jobElement.textContent=s,this.userID=i,this.avatarElement.style.backgroundImage="url(".concat(n,")")}getUserID(){return this.userID}setAvatar(e){this.avatarElement.style.backgroundImage="url(".concat(e,")")}}({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"}),o=e=>{const t=e.owner._id===c,s=function(e){return new class{constructor(e,t){this._title=e.data.name,this._imageUrl=e.data.link,this._cardID=e.data._id,this._ownerID=e.data.owner._id,this._likes=e.data.likes,this._handleLike=e.handleLike,this._handleUnlike=e.handleUnlike,this._handleCardClick=e.handleCardClick,this._confirmDelete=e.confirmDelete,this._templateSelector=t,this._doILike=this._doILike.bind(this)}_getTemplate(){this._cardElement=document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_addDataToCard(){this.title=this._cardElement.querySelector(".element__image-title"),this.image=this._cardElement.querySelector(".element__image"),this.likesCount=this._cardElement.querySelector(".element__likes-count"),void 0===this._likes&&(this._likes=[]),this.likesCount.textContent=this._likes.length,this.title.textContent=this._title,this.image.src=this._imageUrl,this.image.alt=this._title}deleteCard(){this._cardElement.remove(),this._cardElement=null}_doILike(e){return e._id===this._myID}_addEventListeners(e){const t=this._cardElement.querySelector(".element__delete-btn");e?(t.classList.remove("hide"),t.addEventListener("click",(()=>{this._confirmDelete(this)}))):t.classList.add("hide"),this._likeButton=this._cardElement.querySelector(".element__like-toggle"),this.isLikedByMe=this._likes.find(this._doILike),this.setLikeIcon(),this._likeButton.addEventListener("click",(()=>{this.isLikedByMe?this._handleUnlike(this):this._handleLike(this)})),this.image.addEventListener("click",(()=>{this._handleCardClick({link:this._imageUrl,name:this._title})}))}setLikeIcon(){this.isLikedByMe?this._likeButton.classList.add("element__like-toggle-active"):this._likeButton.classList.remove("element__like-toggle-active")}updateLikesCount(e){this.likesCount.textContent=e}generateCard(e,t){return this._myID=t,this._getTemplate(),this._addDataToCard(),this._addEventListeners(e),this._cardElement}getID(){return this._cardID}}({data:e,handleCardClick:()=>{d(e)},confirmDelete:e=>{_(e)},handleLike:a,handleUnlike:l},"#element")}(e);h.addItem(s.generateCard(t,c))};function a(e){n.likeCard(e.getID()).then((t=>{e.isLikedByMe=!0,e.setLikeIcon(!0),e.updateLikesCount(t.likes.length)})).catch((e=>{console.log(e)})).finally((()=>{}))}function l(e){n.unlikeCard(e.getID()).then((t=>{e.isLikedByMe=!1,e.setLikeIcon(!1),e.updateLikesCount(t.likes.length)})).catch((e=>{console.log(e)}))}const h=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:o},".elements");let c="0";Promise.all([n.getInitialCards(),n.getUserInfo()]).then((e=>{let[t,s]=e;c=s._id,h.renderItems(t),r.setUserInfo({userName:s.name,job:s.about,userID:s._id,avatarURL:s.avatar})})).catch((e=>{console.log(e)}));const u=new class extends s{constructor(e){var t,s;super(e),s=e=>{let{link:t,name:s}=e;this.imageCaption.textContent=s,this.imageElement.src=t,this.imageElement.alt=s,super.open()},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this.imageCaption=this.popupElement.querySelector(".popup__image-title"),this.imageElement=this.popupElement.querySelector(".popup__image")}}(".popup-image"),d=e=>{u.open(e)},p=new i({popupSelector:".popup-profile-form",handleFormSubmit:e=>{p.changeSubmitBtnText("Updating profile information"),n.editProfile({userName:e.name,about:e.job}).then((e=>{console.log("res",e),r.setUserInfo({userName:e.name,job:e.about,avatarURL:e.avatar}),p.close()})).catch((e=>{console.log(e)})).finally((()=>{p.changeSubmitBtnText("Save")}))}}),m=new class extends s{constructor(e){let{popupSelector:t,handleSubmit:s}=e;super(t),this._handleSubmit=s,this._confirmation=this.popupElement.querySelector(".popup__confirmation"),this._submitBtn=this._confirmation.querySelector(".popup__button")}_confirmSubmit(e){e.preventDefault(),this._handleSubmit(this.card)}open(e){this.card=e,super.open()}setEventListeners(){super.setEventListeners(),this._confirmation.addEventListener("submit",(e=>this._confirmSubmit(e)))}changeSubmitBtnText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"saving";this._submitBtn.textContent=e}}({popupSelector:".popup-delete-confirmation",handleSubmit:e=>{m.changeSubmitBtnText("Deleting..."),n.deleteCard(e.getID()).then((t=>{e.deleteCard(),m.close()})).catch((e=>{console.log(e)})).finally((()=>{m.changeSubmitBtnText("Yes")}))}}),_=e=>{m.open(e)},g=new i({popupSelector:".popup-place-form",handleFormSubmit:e=>{g.changeSubmitBtnText("Adding new photo"),n.addCard(e).then((t=>{e.owner={_id:r.getUserID()},e._id=t._id,e.owner._id=c,o(e),g.close()})).catch((e=>{console.log(e)})).finally((()=>{g.changeSubmitBtnText("Save")}))}}),b=new i({popupSelector:".popup-avatar-form",handleFormSubmit:e=>{b.changeSubmitBtnText("Updating avatar image"),n.updateAvatar(e).then((t=>{t.avatar===e.link?(r.setAvatar(e.link),b.close()):reject("Error changing Avatar image")})).catch((e=>{console.log(e)})).finally((e=>{b.changeSubmitBtnText("Save")}))}}),E=new e(t,p.popupElement),v=new e(t,g.popupElement),k=new e(t,b.popupElement);u.setEventListeners(),p.setEventListeners(),g.setEventListeners(),m.setEventListeners(),b.setEventListeners(),E.enableValidation(),v.enableValidation(),k.enableValidation();const L=document.querySelector(".profile__edit-btn"),f=document.querySelector(".profile__add-btn"),S=document.querySelector(".profile__edit-avatar-btn");L.addEventListener("click",(()=>{p.open(),p.prefillForm(r.getUserInfo()),E.resetValidation()})),f.addEventListener("click",(()=>{g.open(),v.resetValidation()})),S.addEventListener("click",(()=>{b.open(),k.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9CLElBQUlULEVBQWMsQ0FDeEMzSixjSi9KeUIscUJJZ0t6QmMsaUJBQW1CeUUsSUFDZjZFLEVBQWtCM0ksb0JBQW9CLHlCQUN0Q0ksRUFBSXVDLGFBQWFtQixHQUNaNUMsTUFBS1YsSUFDRUEsRUFBSW9DLFNBQVdrQixFQUFLbEMsTUFDcEJrQixFQUFTYyxVQUFVRSxFQUFLbEMsTUFDeEIrRyxFQUFrQi9KLFNBRWxCZ0MsT0FBTyxrQ0FJZG1HLE9BQU0wQixJQUNIekcsUUFBUUMsSUFBSXdHLE1BRWZ4QixTQUFRekcsSUFDTG1JLEVBQWtCM0ksb0JBQW9CLGNBU2hENEksRUFBdUIsSUFBSUMsRUFBY3hLLEVBQW1CNEosRUFBY3pKLGNBQzFFc0ssRUFBcUIsSUFBSUQsRUFBY3hLLEVBQW1CcUssRUFBYWxLLGNBQ3ZFdUssRUFBNEIsSUFBSUYsRUFBY3hLLEVBQW1Cc0ssRUFBa0JuSyxjQUl6RnNKLEVBQVc5SSxvQkFDWGlKLEVBQWNqSixvQkFDZDBKLEVBQWExSixvQkFDYm1KLEVBQXdCbkosb0JBQ3hCMkosRUFBa0IzSixvQkFTbEI0SixFQUFxQjNLLG1CQUNyQjZLLEVBQW1CN0ssbUJBQ25COEssRUFBMEI5SyxtQkFLMUIsTUFBTStLLEVBQWtCdkssU0FBU25DLGNBQWMsc0JBQ3pDMk0sRUFBZ0J4SyxTQUFTbkMsY0FBYyxxQkFDdkM0TSxFQUFpQnpLLFNBQVNuQyxjQUFjLDZCQU85QzBNLEVBQWdCaEwsaUJBQWlCLFNBTk0sS0FDbkNpSyxFQUFjcEosT0FDZG9KLEVBQWM5SCxZQUFZMkMsRUFBUzFCLGVBQ25Dd0gsRUFBcUJ4SyxxQkFTekI2SyxFQUFjakwsaUJBQWlCLFNBSkosS0FDdkIwSyxFQUFhN0osT0FDYmlLLEVBQW1CMUsscUJBT3ZCOEssRUFBZWxMLGlCQUFpQixTQUpOLEtBQ3RCMkssRUFBa0I5SixPQUNsQmtLLEVBQTBCM0sscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9DYXJkIGNsYXNzIHdpdGggRXhwb3J0XHJcbmNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gZGF0YS5kYXRhLm5hbWU7IC8vbm90IHN1cmUgd2h5IEkgbmVlZCB0aGUgZXh0cmEgXCJkYXRhLlwiIGhlcmUhXHJcbiAgICAgICAgdGhpcy5faW1hZ2VVcmwgPSBkYXRhLmRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9jYXJkSUQgPSBkYXRhLmRhdGEuX2lkO1xyXG4gICAgICAgIHRoaXMuX293bmVySUQgPSBkYXRhLmRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5kYXRhLmxpa2VzO1xyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlID0gZGF0YS5oYW5kbGVMaWtlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVVubGlrZSA9IGRhdGEuaGFuZGxlVW5saWtlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGRhdGEuaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1EZWxldGUgPSBkYXRhLmNvbmZpcm1EZWxldGU7IC8vcmV0dXJucyB0cnVlIGlmIHNob3VsZCBkZWxldGUgXHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7IC8vIFwiI2NhcmQtdGVtcGxhdGVcIlxyXG5cclxuICAgICAgICB0aGlzLl9kb0lMaWtlID0gdGhpcy5fZG9JTGlrZS5iaW5kKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIH1cclxuICAgIF9hZGREYXRhVG9DYXJkKCkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlLXRpdGxlXCIpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMubGlrZXNDb3VudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZXMtY291bnRcIik7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xpa2VzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saWtlc0NvdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMudGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IHRoaXMuX2ltYWdlVXJsO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB9XHJcbiAgICBkZWxldGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpOyAvL3RoaXMuX2NhcmRFbGVtZW50PW51bGw7IGRvZXMgbm90IHdvcmtcclxuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBfZG9JTGlrZShpZE9mTGlrZXIpIHtcclxuICAgICAgICByZXR1cm4gaWRPZkxpa2VyLl9pZCA9PT0gdGhpcy5fbXlJRDtcclxuICAgIH1cclxuICAgIF9hZGRFdmVudExpc3RlbmVycyhjYW5EZWxldGUpIHtcclxuICAgICAgICBjb25zdCBkZWxldGVCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2RlbGV0ZS1idG5cIilcclxuICAgICAgICBpZiAoY2FuRGVsZXRlKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLXRvZ2dsZVwiKTtcclxuICAgICAgICB0aGlzLmlzTGlrZWRCeU1lID0gdGhpcy5fbGlrZXMuZmluZCh0aGlzLl9kb0lMaWtlKTtcclxuICAgICAgICB0aGlzLnNldExpa2VJY29uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuaXNMaWtlZEJ5TWUgPSAhdGhpcy5pc0xpa2VkQnlNZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMaWtlZEJ5TWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZVVubGlrZSh0aGlzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soe1xyXG4gICAgICAgICAgICAgICAgbGluazogdGhpcy5faW1hZ2VVcmwsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl90aXRsZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNldExpa2VJY29uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGlrZWRCeU1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2UtdG9nZ2xlLWFjdGl2ZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19saWtlLXRvZ2dsZS1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlTGlrZXNDb3VudChuZXdDb3VudCkge1xyXG4gICAgICAgIHRoaXMubGlrZXNDb3VudC50ZXh0Q29udGVudCA9IG5ld0NvdW50O1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVDYXJkKGNhbkRlbGV0ZSwgbXlJRCkge1xyXG4gICAgICAgIHRoaXMuX215SUQgPSBteUlEO1xyXG4gICAgICAgIHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fYWRkRGF0YVRvQ2FyZCgpO1xyXG4gICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKGNhbkRlbGV0ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICAgIH1cclxuICAgIGdldElEKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkSUQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiLy9jbGFzcyBGb3JtVmFsaWRhdG9yIHdpdGggRXhwb3J0XHJcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5nczsgLy9zZWxlY3RvcnMgYW5kIGZvcm0gY2xhc3Nlc1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7IC8vZm9ybSBlbGVtZW50IHRvIGJlIHZhbGlkYXRlZFxyXG4gICAgfVxyXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGlucHV0LmlkICsgXCItZXJyb3JcIik7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHsgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgfSlcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcylcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcylcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0RXZlbnRMaXN0bmVycygpIHtcclxuICAgICAgICB0aGlzLmlucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXTtcclxuICAgICAgICB0aGlzLmJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH1cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RuZXJzKCk7XHJcblxyXG4gICAgfVxyXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KSAvL2NsZWFyaW5nIGVycm9ycyBldmVuIGlmIHVzZXIgYWNjaWRlbnRseSBsZWF2ZXMgdGhlIGZvcm0gd2l0aCBlcnJvcnMgb24gaXQhICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTsgLy8gY29udHJvbGxpbmcgdGhlIHN1Ym1pdCBidXR0b24gXHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgY29uc3QgZGVmYXVsdEZvcm1Db25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBDb25maWcgPSB7XHJcbiAgICBpbWFnZU1vZGFsV2luZG93OiBcIi5wb3B1cC1pbWFnZVwiLFxyXG4gICAgZWRpdEZvcm1Nb2RhbFdpbmRvdzogXCIucG9wdXAtcHJvZmlsZS1mb3JtXCIsXHJcbiAgICBjYXJkRm9ybU1vZGFsV2luZG93OiBcIi5wb3B1cC1wbGFjZS1mb3JtXCIsXHJcbiAgICBkZWxldGVDb25maXJtYXRpb25XaW5kb3c6IFwiLnBvcHVwLWRlbGV0ZS1jb25maXJtYXRpb25cIixcclxuICAgIGNoYW5nZUF2YXRhck1vZGFsV2luZG93OiBcIi5wb3B1cC1hdmF0YXItZm9ybVwiXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUNvbmZpZyA9IHtcclxuICAgIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19qb2JcIixcclxuICAgIHByb2ZpbGVBdmF0YXJJbWFnZTogXCIucHJvZmlsZV9fYXZhdGFyXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkc0NvbmZpZyA9IHtcclxuICAgIGNhcmRTZWxlY3RvcjogXCIjZWxlbWVudFwiLCAvL0NhcmQuIHRlbXBsYXRlU2VsZWN0b3IgIFxyXG4gICAgcGxhY2Vzd3JhcDogXCIuZWxlbWVudHNcIiwgLy9TZWN0aW9uLmNvbnRhaW5lclNlbGVjdG9yXHJcbn07XHJcbmV4cG9ydCBjb25zdCBzdWJtaXRCdXR0b25Db25maWcgPSB7XHJcbiAgICBwcm9maWxlOiBcIi5lZGl0LXByb2ZpbGUtZm9ybV9fc2F2ZVwiLFxyXG4gICAgYXZhdGFyOiBcIi51cGRhdGUtYXZhdGFyLWZvcm1fX3NhdmVcIixcclxuICAgIGNhcmQ6IFwiLmFkZC1wbGFjZS1mb3JtX19zYXZlXCJcclxufSIsImNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjVXAgPSB0aGlzLl9oYW5kbGVFc2NVcC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY1VwKGV2dCkge1xyXG4gICAgICAgIC8vcHJldmVudCBkZWZhdWx0IGFuZCBpZiBidXR0b24gd2FzIEVzYyBjYWxsIGNsb3NlIG1ldGhvZFxyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIC8vY3JlYXRlIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBjbGljayBvbiBjbG9zZSBidXR0b24gb3Igc2VtaXRyYW5zcGFyZW50IGJhY2tncm91bmRcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTsgLy9jbG9zZSBidXR0b25cclxuICAgICAgICAvL3N1Z2dlc3Rpb24gb2YgbW91c2Vkb3duIHVzZWQuIGV2ZW50TGlzdGVuZXJzIHVzaW5nIGFycm93IGZ1bmN0aW9ucyBjYW4ndCBiZSByZW1vdmVkLFxyXG4gICAgICAgIC8vIGFuZCBpZiBJIGRvbid0IHVzZSBhbiBhcnJvdyBmdW5jdGlvbiBJIGRvbid0IGhhdmUgYWNjZXNzIHRvIGJvdGggZXZ0LnRhcmdldCBhbmQgdGhpcy5wb3B1cEVsZW1lbnRcclxuICAgICAgICAvLyBzbyBpZiBJIGNhbid0IHJlbW92ZSBpdCBpbiBjbG9zZSwgSSdtIG5vdCBnb2luZyB0byBjcmVhdGUgYSBuZXcgb24gd2l0aCBlYWNoIG9wZW4hOTAtLzg0NzI0MjU0NTExMzIgICAgICAgIFxyXG4gICAgICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMucG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7IC8vcG9wdXAgc2VtaXRyYW5zcGFyZW50IGJhY2tncm91bmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZU92ZXJsYXlDbGljayhldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpOyAvL3BvcHVwIHNlbWl0cmFuc3BhcmVudCBiYWNrZ3JvdW5kXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICAvL2FkZCBhIG5ldyBjbGFzcyBhbmQgY3JlYXRlcyBhbiBldmVudGxpc3RlbmVyIGZvciBFc2Mga2V5dXBcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgLy9yZW1vdmVzIHRoZSBjbGFzcyB3ZSBhZGRlZCBhbmQgdGhlIGV2ZW50bGlzdGVuZXIgZm9yIHRoZSBFc2Mga2V5dXBcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgLy90aGlzLnBvcHVwRWxlbWVudFxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpXTtcclxuXHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICAgIH1cclxuICAgIGNoYW5nZVN1Ym1pdEJ0blRleHQobXNnID0gXCJzYXZpbmdcIikge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IG1zZztcclxuICAgIH1cclxuICAgIF9mb3JtU3VibWl0KCkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHRoaXMuX2Zvcm1TdWJtaXQoZXZ0KSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZSA9ICgpID0+IHsgLy9hcnJvdyBmdW5jdGlvbiBtZXRob2QsIHJldGFpbnMgY29udGV4dCB3aXRob3V0IG5lZWQgZm9yIC5iaW5kKHRoaXMpXHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZWZpbGxGb3JtKGlucHV0VmFsdWVzKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtOyIsImNsYXNzIEFQSSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGJhc2VVUkwsIGhlYWRlcnMgfSkge1xyXG4gICAgICAgIHRoaXMuYmFzZVVSTCA9IGJhc2VVUkw7XHJcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICAgIHJldHVybiAocmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXNUZXh0KSk7O1xyXG4gICAgfVxyXG4gICAgX2N1c3RvbUZldGNoKHVybCwgbWV0aG9kID0gXCJHRVRcIikgeyAvL3VzZWQgaW50ZXJuYWxseVxyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcblxyXG4gICAgfVxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkgeyAvL2luZGV4LmpzIGxpbmUgNjZcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkc2ApO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKSB7IC8vaW5kZXguanMgTGluZSA2NiBhbmQgMTg2XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVSTH0vdXNlcnMvbWVgKTtcclxuICAgIH1cclxuXHJcbiAgICBlZGl0UHJvZmlsZSh7IHVzZXJOYW1lLCBhYm91dCB9KSB7IC8vaW5kZXguanMgTGluZSA5MVxyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkgeyAvL2luZGV4LmpzIExpbmUgMTM2XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVSTH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGluazogbGlua1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICB9XHJcbiAgICBkZWxldGVDYXJkKGNhcmRJRCkgeyAvL2luZGV4LmpzIExpbmUgMTA5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVSTH0vY2FyZHMvJHtjYXJkSUR9YCwgXCJERUxFVEVcIilcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0TGlrZXNDb3VudChjYXJkSUQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJnZXRMaWtlc0NvdW50IGNhcmRJRCBcIiwgY2FyZElEKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVSTH0vY2FyZHMvbGlrZXMvJHtjYXJkSUR9YCwgXCJHRVRcIilcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc3VsdFwiLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qTm90IHVzZWQgeWV0Ki9cclxuICAgIGlzTXlDYXJkKGNhcmRJRCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm93bmVyLl9pZCA9PT0gdGhpcy5hdXRob3Jpc2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGlrZUNhcmQoY2FyZElEKSB7IC8vaW5kZXguanMgTGluZSA0OFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVUkx9L2NhcmRzL2xpa2VzLyR7Y2FyZElEfWAsIFwiUFVUXCIpXHJcbiAgICB9XHJcbiAgICB1bmxpa2VDYXJkKGNhcmRJRCkgeyAvL2luZGV4LmpzIExpbmUgNTBcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCBcIkRFTEVURVwiKVxyXG4gICAgfVxyXG4gICAgdXBkYXRlQXZhdGFyKHsgbGluayB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVSTH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBsaW5rXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG5cclxuICAgIH1cclxuXHJcblxyXG59XHJcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQVBJKHtcclxuICAgIGJhc2VVUkw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiMDc3ZTAyZjUtNDY5Yy00OTI1LWExMTAtZTdkYWFjOWY2ZWFkXCIsXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgIH1cclxufSk7IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuLy8tLVxyXG4vL2ltcG9ydCBzdGF0ZW1lbnRzXHJcbi8vLS1cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRGb3JtQ29uZmlnLCBwb3B1cENvbmZpZywgcHJvZmlsZUNvbmZpZywgY2FyZHNDb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvblwiO1xyXG5cclxuXHJcbi8vLS1cclxuLy9Qcm9maWxlIFNldHVwXHJcbi8vLS1cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIG5hbWVTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlVGl0bGUsXHJcbiAgICBqb2JTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgICBhdmF0YXJTZWxlY3RvcjogcHJvZmlsZUNvbmZpZy5wcm9maWxlQXZhdGFySW1hZ2VcclxufSk7XHJcblxyXG4vLy0tXHJcbi8vQ2FyZHMgU2V0dXBcclxuLy8tLVxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgb3BlbkltYWdlUG9wdXAoZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb25maXJtRGVsZXRlOiAoY2FyZFRvRGVsZXRlKSA9PiB7XHJcbiAgICAgICAgICAgIG9wZW5EZWxldGVDb25maXJtYXRpb25Qb3B1cChjYXJkVG9EZWxldGUpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVMaWtlLFxyXG4gICAgICAgIGhhbmRsZVVubGlrZSxcclxuICAgIH0sIGNhcmRzQ29uZmlnLmNhcmRTZWxlY3Rvcik7XHJcbiAgICByZXR1cm4gY2FyZDtcclxufVxyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCBjYW5EZWxldGUgPSAoKGRhdGEub3duZXIuX2lkID09PSBteUlEKSA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKGNhbkRlbGV0ZSwgbXlJRCkpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZShjYXJkKSB7XHJcbiAgICBhcGkubGlrZUNhcmQoY2FyZC5nZXRJRCgpKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5pc0xpa2VkQnlNZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZUljb24odHJ1ZSk7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXNDb3VudChyZXMubGlrZXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge30pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVVbmxpa2UoY2FyZCkge1xyXG4gICAgYXBpLnVubGlrZUNhcmQoY2FyZC5nZXRJRCgpKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5pc0xpa2VkQnlNZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjYXJkLnNldExpa2VJY29uKGZhbHNlKTtcclxuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlc0NvdW50KHJlcy5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuXHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxufSwgY2FyZHNDb25maWcucGxhY2Vzd3JhcCk7XHJcblxyXG5sZXQgbXlJRCA9IFwiMFwiO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG4gICAgLnRoZW4oKFtjYXJkRGF0YSwgdXNlckRhdGFdKSA9PiB7XHJcblxyXG4gICAgICAgIG15SUQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICAgICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGNhcmREYXRhKTtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJOYW1lOiB1c2VyRGF0YS5uYW1lLCBqb2I6IHVzZXJEYXRhLmFib3V0LCB1c2VySUQ6IHVzZXJEYXRhLl9pZCwgYXZhdGFyVVJMOiB1c2VyRGF0YS5hdmF0YXIgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcblxyXG4vLy0tXHJcbi8vSW1hZ2UgUG9wdXAgU2V0dXBcclxuLy8tLVxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwQ29uZmlnLmltYWdlTW9kYWxXaW5kb3cpO1xyXG5jb25zdCBvcGVuSW1hZ2VQb3B1cCA9IChkYXRhKSA9PiB7IGltYWdlUG9wdXAub3BlbihkYXRhKTsgfTtcclxuXHJcbi8vLS1cclxuLy9Vc2VyIEluZm8gUG9wdXAgU2V0dXBcclxuLy8tLVxyXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogcG9wdXBDb25maWcuZWRpdEZvcm1Nb2RhbFdpbmRvdyxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm9Qb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiVXBkYXRpbmcgcHJvZmlsZSBpbmZvcm1hdGlvblwiKTtcclxuICAgICAgICBhcGkuZWRpdFByb2ZpbGUoeyB1c2VyTmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5qb2IgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzXCIsIHJlcyk7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJOYW1lOiByZXMubmFtZSwgam9iOiByZXMuYWJvdXQsIGF2YXRhclVSTDogcmVzLmF2YXRhciB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB1c2VySW5mb1BvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mb1BvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJTYXZlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuXHJcblxyXG4gICAgfVxyXG5cclxufSk7XHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpZy5kZWxldGVDb25maXJtYXRpb25XaW5kb3csXHJcbiAgICBoYW5kbGVTdWJtaXQ6IChjYXJkKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChcIkRlbGV0aW5nLi4uXCIpO1xyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0SUQoKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChcIlllc1wiKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgfVxyXG59KTtcclxuY29uc3Qgb3BlbkRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwID0gKGRhdGEpID0+IHsgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAub3BlbihkYXRhKTsgfTtcclxuXHJcbi8vLS1cclxuLy9BZGQgQ2FyZCBQb3B1cCBTZXR1cFxyXG4vLy0tXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlnLmNhcmRGb3JtTW9kYWxXaW5kb3csXHJcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgICAgIG5ld0NhcmRQb3B1cC5jaGFuZ2VTdWJtaXRCdG5UZXh0KFwiQWRkaW5nIG5ldyBwaG90b1wiKTtcclxuICAgICAgICBhcGkuYWRkQ2FyZChkYXRhKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5vd25lciA9IHsgX2lkOiB1c2VySW5mby5nZXRVc2VySUQoKSB9O1xyXG4gICAgICAgICAgICAgICAgZGF0YS5faWQgPSByZXMuX2lkO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5vd25lci5faWQgPSBteUlEO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2FyZChkYXRhKTtcclxuICAgICAgICAgICAgICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXdDYXJkUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChcIlNhdmVcIik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgY2hhbmdlQXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpZy5jaGFuZ2VBdmF0YXJNb2RhbFdpbmRvdyxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2hhbmdlU3VibWl0QnRuVGV4dChcIlVwZGF0aW5nIGF2YXRhciBpbWFnZVwiKTtcclxuICAgICAgICBhcGkudXBkYXRlQXZhdGFyKGRhdGEpXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLmF2YXRhciA9PT0gZGF0YS5saW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckluZm8uc2V0QXZhdGFyKGRhdGEubGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiRXJyb3IgY2hhbmdpbmcgQXZhdGFyIGltYWdlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUF2YXRhclBvcHVwLmNoYW5nZVN1Ym1pdEJ0blRleHQoXCJTYXZlXCIpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufSlcclxuXHJcbi8vLS1cclxuLy9Gb3JtIFZhbGlkYXRvciBzZXR0aW5nc1xyXG4vLy0tXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIHVzZXJJbmZvUG9wdXAucG9wdXBFbGVtZW50KTtcclxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIG5ld0NhcmRQb3B1cC5wb3B1cEVsZW1lbnQpO1xyXG5jb25zdCBjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdEZvcm1Db25maWcsIGNoYW5nZUF2YXRhclBvcHVwLnBvcHVwRWxlbWVudCk7XHJcbi8vLS1cclxuLy9FdmVudExpc3RlbmVyc1xyXG4vLy0tXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY2hhbmdlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8tLVxyXG4vL0luaXRpYWwgQ2FyZHMgLyBQbGFjZXNcclxuLy8tLVxyXG4vL2NhcmRzTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xyXG5cclxuLy8tLVxyXG4vL0VuYWJsZSBGb3JtIFZhbGlkYXRvcnNcclxuLy8tLVxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNoYW5nZUF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLy0tXHJcbi8vRE9NIHRvIEpTXHJcbi8vLS1cclxuXHJcbmNvbnN0IG9wZW5Qcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xyXG5jb25zdCBvcGVuUGxhY2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcclxuY29uc3Qgb3BlbkF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXItYnRuJyk7XHJcbmNvbnN0IG9wZW5Qcm9maWxlRm9ybVdpdGhDdXJyZW50SW5mbyA9ICgpID0+IHtcclxuICAgIHVzZXJJbmZvUG9wdXAub3BlbigpO1xyXG4gICAgdXNlckluZm9Qb3B1cC5wcmVmaWxsRm9ybSh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5vcGVuUHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUHJvZmlsZUZvcm1XaXRoQ3VycmVudEluZm8pO1xyXG5cclxuY29uc3Qgb3BlblBsYWNlRm9ybUVtcHR5ID0gKCkgPT4ge1xyXG4gICAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICAgIHBsYWNlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufVxyXG5vcGVuUGxhY2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBsYWNlRm9ybUVtcHR5KTtcclxuY29uc3QgY2hhbmdlQXZhdGFySW1hZ2UgPSAoKSA9PiB7XHJcbiAgICBjaGFuZ2VBdmF0YXJQb3B1cC5vcGVuKCk7XHJcbiAgICBjaGFuZ2VBdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcbm9wZW5BdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlQXZhdGFySW1hZ2UpOyIsIiBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgIHRoaXMubmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgIHRoaXMuam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgICAgICB0aGlzLmF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgICB9XHJcblxyXG4gICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgICBjb25zdCB1c2VyID0ge1xyXG4gICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgIGpvYjogdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgIH1cclxuXHJcbiAgICAgc2V0VXNlckluZm8oeyB1c2VyTmFtZSwgam9iLCB1c2VySUQsIGF2YXRhclVSTCB9KSB7XHJcbiAgICAgICAgIHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgICAgICAgdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgICAgICB0aGlzLnVzZXJJRCA9IHVzZXJJRDtcclxuICAgICAgICAgdGhpcy5hdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVUkx9KWBcclxuICAgICB9XHJcbiAgICAgZ2V0VXNlcklEKCkge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy51c2VySUQ7XHJcbiAgICAgfVxyXG4gICAgIHNldEF2YXRhcihhdmF0YXJVUkwpIHtcclxuICAgICAgICAgdGhpcy5hdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVUkx9KWA7XHJcbiAgICAgfVxyXG5cclxuIH1cclxuIGV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvOyIsImNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyAvKml0ZW1zLCovIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy90aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vKCk7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICAvL3Byb2plY3QgcmVxdWlyZW1lbnRzIGluY2x1ZGUgbG9vc2UgY291cGxpbmcgXHJcbiAgICAgICAgLy93aXRoIGluZGV4LmpzIGFuZCBjbGFzcyBpbmhlcml0YW5jZSBiZWluZyB0aGUgb25seSBjb25uZWN0aW9uIGJldHdlZW4gY2xhc3NlcyFcclxuICAgICAgICAvL3NvIFwiY29uc3QgY2FyZCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pXCIgaXMgbm90IHBlcm1pdHRlZCBoZXJlIVxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5pbWFnZUNhcHRpb24gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLXRpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB9XHJcbiAgICBvcGVuID0gKHsgbGluaywgbmFtZSB9KSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5jbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCB9KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vdGhpcy5wb3B1cEVsZW1lbnRcclxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fY29uZmlybWF0aW9uID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb25maXJtYXRpb24nKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9jb25maXJtYXRpb24ucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKTtcclxuICAgIH1cclxuICAgIF9jb25maXJtU3VibWl0KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5jYXJkKTtcclxuICAgIH1cclxuICAgIG9wZW4oY2FyZCkge1xyXG4gICAgICAgIHRoaXMuY2FyZCA9IGNhcmQ7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlybWF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4gdGhpcy5fY29uZmlybVN1Ym1pdChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgY2hhbmdlU3VibWl0QnRuVGV4dChtc2cgPSBcInNhdmluZ1wiKSB7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbXNnO1xyXG4gICAgfVxyXG5cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtYXRpb247Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImRlZmF1bHRGb3JtQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwicG9wdXBTZWxlY3RvciIsInBvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY1VwIiwiYmluZCIsImNsb3NlIiwib3BlbiIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiX2hhbmRsZU92ZXJsYXlDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtIiwicmVzZXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdG4iLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJjaGFuZ2VTdWJtaXRCdG5UZXh0IiwibXNnIiwiX2Zvcm1TdWJtaXQiLCJwcmVmaWxsRm9ybSIsImFwaSIsImJhc2VVUkwiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsIl9jdXN0b21GZXRjaCIsInVybCIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGUiLCJ1c2VyTmFtZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSUQiLCJnZXRMaWtlc0NvdW50IiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImxpa2VzIiwibGVuZ3RoIiwiaXNNeUNhcmQiLCJvd25lciIsIl9pZCIsImF1dGhvcmlzYXRpb24iLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJ1cGRhdGVBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwibmFtZUVsZW1lbnQiLCJqb2JFbGVtZW50IiwiYXZhdGFyRWxlbWVudCIsImpvYiIsInNldFVzZXJJbmZvIiwidXNlcklEIiwiYXZhdGFyVVJMIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJnZXRVc2VySUQiLCJzZXRBdmF0YXIiLCJyZW5kZXJDYXJkIiwiZGF0YSIsImNhbkRlbGV0ZSIsIm15SUQiLCJjYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsIl90aXRsZSIsIl9pbWFnZVVybCIsIl9jYXJkSUQiLCJfb3duZXJJRCIsIl9saWtlcyIsIl9oYW5kbGVMaWtlIiwiaGFuZGxlTGlrZSIsIl9oYW5kbGVVbmxpa2UiLCJoYW5kbGVVbmxpa2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NvbmZpcm1EZWxldGUiLCJjb25maXJtRGVsZXRlIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZG9JTGlrZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYWRkRGF0YVRvQ2FyZCIsInRpdGxlIiwiaW1hZ2UiLCJsaWtlc0NvdW50IiwidW5kZWZpbmVkIiwic3JjIiwiYWx0IiwiaWRPZkxpa2VyIiwiX215SUQiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJkZWxldGVCdG4iLCJfbGlrZUJ1dHRvbiIsImlzTGlrZWRCeU1lIiwiZmluZCIsInNldExpa2VJY29uIiwidXBkYXRlTGlrZXNDb3VudCIsIm5ld0NvdW50IiwiZ2VuZXJhdGVDYXJkIiwiZ2V0SUQiLCJvcGVuSW1hZ2VQb3B1cCIsImNhcmRUb0RlbGV0ZSIsIm9wZW5EZWxldGVDb25maXJtYXRpb25Qb3B1cCIsImNyZWF0ZUNhcmQiLCJjYXJkc0xpc3QiLCJhZGRJdGVtIiwiY2F0Y2giLCJlcnIiLCJmaW5hbGx5IiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwiYWxsIiwiY2FyZERhdGEiLCJ1c2VyRGF0YSIsImltYWdlUG9wdXAiLCJpbWFnZUNhcHRpb24iLCJpbWFnZUVsZW1lbnQiLCJ1c2VySW5mb1BvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9jb25maXJtYXRpb24iLCJfY29uZmlybVN1Ym1pdCIsImV2ZW50IiwiZXJyb3IiLCJuZXdDYXJkUG9wdXAiLCJjaGFuZ2VBdmF0YXJQb3B1cCIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsInBsYWNlRm9ybVZhbGlkYXRvciIsImNoYW5nZUF2YXRhckZvcm1WYWxpZGF0b3IiLCJvcGVuUHJvZmlsZUZvcm0iLCJvcGVuUGxhY2VGb3JtIiwib3BlbkF2YXRhckZvcm0iXSwic291cmNlUm9vdCI6IiJ9